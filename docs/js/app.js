(function(e){function t(t){for(var n,i,s=t[0],r=t[1],u=t[2],c=0,d=[];c<s.length;c++)i=s[c],Object.prototype.hasOwnProperty.call(l,i)&&l[i]&&d.push(l[i][0]),l[i]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);p&&p(t);while(d.length)d.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,i=1;i<a.length;i++){var s=a[i];0!==l[s]&&(n=!1)}n&&(o.splice(t--,1),e=r(r.s=a[0]))}return e}var n={},i={app:0},l={app:0},o=[];function s(e){return r.p+"js/"+({"rpl-card-promotion":"rpl-card-promotion"}[e]||e)+".js"}function r(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.e=function(e){var t=[],a={"rpl-card-promotion":1};i[e]?t.push(i[e]):0!==i[e]&&a[e]&&t.push(i[e]=new Promise((function(t,a){for(var n="css/"+({"rpl-card-promotion":"rpl-card-promotion"}[e]||e)+".css",l=r.p+n,o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var u=o[s],c=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(c===n||c===l))return t()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){u=d[s],c=u.getAttribute("data-href");if(c===n||c===l)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var n=t&&t.target&&t.target.src||l,o=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=n,delete i[e],p.parentNode.removeChild(p),a(o)},p.href=l;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){i[e]=0})));var n=l[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,a){n=l[e]=[t,a]}));t.push(n[2]=o);var u,c=document.createElement("script");c.charset="utf-8",c.timeout=120,r.nc&&c.setAttribute("nonce",r.nc),c.src=s(e);var d=new Error;u=function(t){c.onerror=c.onload=null,clearTimeout(p);var a=l[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+n+": "+i+")",d.name="ChunkLoadError",d.type=n,d.request=i,a[1](d)}l[e]=void 0}};var p=setTimeout((function(){u({type:"timeout",target:c})}),12e4);c.onerror=c.onload=u,document.head.appendChild(c)}return Promise.all(t)},r.m=e,r.c=n,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/content-collection-component/",r.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var p=c;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0aff":function(e,t,a){"use strict";a("858a")},1:function(e,t){},2:function(e,t){},"21bb":function(e,t,a){"use strict";a("2dad")},"26f1":function(e,t){e.exports={wide:{m:6,l:4,xxxl:3},narrow:{m:6,xxxl:4}}},"2dad":function(e,t,a){},"2ec7":function(e){e.exports=JSON.parse('{"SEARCH_URL":"elastic.sdp2.sdp.vic.gov.au","SEARCH_AUTH_USERNAME":"","SEARCH_AUTH_PASSWORD":"","SEARCH_INDEX":"elasticsearch_index_nonprod_node","SEARCH_HASH":"a83890f7a31dea14e1ae83c6f0afacca"}')},3:function(e,t){},3318:function(e,t,a){},4678:function(e,t,a){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6b","./en-gb.js":"39a6b","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(e){var t=l(e);return a(t)}function l(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=l,e.exports=i,i.id="4678"},"4e7f":function(e,t,a){var n=a("ded3").default,i=a("c973").default,l=a("278c").default,o=a("448a").default,s=a("7037").default,r=a("6374").default,u=a("9523").default,c=a("970b").default,d=a("5bc3").default;a("96cf"),a("159b"),a("b64b"),a("d3b7"),a("25f0"),a("a4d3"),a("e01a"),a("4e82"),a("4de4"),a("ddb0"),a("4fad"),a("d81d"),a("b0c0"),a("99af"),a("ac1f"),a("5319");var p=a("5a0c"),f=a("26f1");e.exports=function(){"use strict";function e(t,a,n){if(c(this,e),this.config=t,this.searchClient=a,this.envConfig=n,this.defaults={EnvironmentSiteId:"4",ResultItemFieldNameUrl:"url",ResultItemFieldNamePrimarySite:"field_node_primary_site",ExposedFilterKeywordLabel:"Search by keyword",ExposedFilterKeywordPlaceholder:"Enter keywords",ExposedFilterSubmitLabel:"Filter results",ExposedFilterClearFormLabel:"Clear search filters",ExposedControlSortModel:"sort",ExposedControlSortLabel:"Sort",ExposedControlSortPlaceholder:"Select a value",ExposedControlItemsPerPageModel:"items_per_page",ExposedControlItemsPerPageLabel:"Items per page",ExposedControlItemsPerPagePlaceholder:"Select a value",ExposedControlPaginationModel:"page",ExposedFilterKeywordModel:"q",ExposedFilterKeywordType:"phrase_prefix",ExposedFilterKeywordDefaultFields:["title","body","summary_processed","field_landing_page_summary","field_paragraph_summary","field_page_intro_text","field_paragraph_body"],ExposedFilterAggregationOrder:"asc",ExposedFilterAggregationSize:30,DisplayResultComponentCardStyle:"noImage",DisplayResultComponentColumns:f,DisplayPaginationComponentColumns:f,ItemsToLoad:12,scrollToResults:!0,scrollToResultsOffsetHeight:102,pageChangeFocusSelector:"a"},!this.searchClient)throw Error("Content Collection Error: A search client function is required.");if(!this.envConfig){console.warn("Content Collection Error: Environmental variables are required. Falling back to default.");var i=this.getDefault("EnvironmentSiteId");this.envConfig={siteId:i,domains:u({},i,"")}}}return d(e,[{key:"getLocalDomainURL",value:function(e,t,a,n){var i="",l="";if(e&&e.length>0){var o,s={},u=r(e);try{for(u.s();!(o=u.n()).done;){var c=o.value,d=c.substring(c.indexOf("-")+1,c.indexOf("/",2)),p=c.substring(c.indexOf("/",2));s[d]=p}}catch(f){u.e(f)}finally{u.f()}t in s?(i=n[t],l=s[t]):a&&(i=n[a],l="//"+i+s[a])}return{domain:i,path:l}}},{key:"getLocalisedLink",value:function(e,t){var a=null;if((null===e||void 0===e?void 0:e.length)>0){var n=this.envConfig;a=n.siteId&&n.domains?this.getLocalDomainURL(e,n.siteId,t,n.domains).path:e[0]}return a}},{key:"getLocalisedLinkFromSource",value:function(e,t,a){var n=t||this.getDefault("ResultItemFieldNameUrl"),i=a||this.getDefault("ResultItemFieldNamePrimarySite"),l=this.getLocalisedLink(e[n],e[i]);return l}},{key:"cloneObject",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"stripEmptyValues",value:function(e){var t=this;Object.keys(e).forEach((function(a){null===e[a]||""===e[a]?delete e[a]:Array.isArray(e[a])?0===e[a].length&&delete e[a]:"object"===s(e[a])&&t.stripEmptyValues(e[a])}))}},{key:"getNewValue",value:function(e){return Array.isArray(e)?o(e):e}},{key:"syncObject",value:function(e,t,a){var n=this;Object.keys(e).forEach((function(i){var l=!a||a.indexOf(i)>=0;l&&(t[i]=n.getNewValue(e[i]))}))}},{key:"getDiffObject",value:function(e,t){var a={};return Object.keys(e).forEach((function(n){e[n]!==t[n]&&(a[n]=e[n])})),this.stripEmptyValues(a),a}},{key:"getTypeCorrectedQuery",value:function(e,t){var a={};return Object.keys(e).forEach((function(n){Array.isArray(t[n])&&!Array.isArray(e[n])?a[n]=[e[n]]:a[n]=e[n]})),a}},{key:"getIdName",value:function(e){return e.toString()}},{key:"getDefault",value:function(e){return this.defaults[e]}},{key:"getStateValue",value:function(e,t){return null===e||void 0===e?void 0:e[this.getDefault(t)]}},{key:"getTitle",value:function(){return this.config.title}},{key:"getDescription",value:function(){return this.config.description}},{key:"getCTA",value:function(){return this.config.callToAction}},{key:"getDisplayType",value:function(){var e,t,a;return null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(a=t.display)||void 0===a?void 0:a.type}},{key:"getInternalSort",value:function(){var e,t;return null===(e=this.config)||void 0===e||null===(t=e.internal)||void 0===t?void 0:t.sort}},{key:"getInternalItemsToLoad",value:function(){var e,t;return null===(e=this.config)||void 0===e||null===(t=e.internal)||void 0===t?void 0:t.itemsToLoad}},{key:"getDisplayResultCountText",value:function(){var e,t,a,n;return null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(a=t.display)||void 0===a||null===(n=a.options)||void 0===n?void 0:n.resultsCountText}},{key:"getDisplayLoadingText",value:function(){var e,t,a,n;return null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(a=t.display)||void 0===a||null===(n=a.options)||void 0===n?void 0:n.loadingText}},{key:"getDisplayNoResultsText",value:function(){var e,t,a,n;return null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(a=t.display)||void 0===a||null===(n=a.options)||void 0===n?void 0:n.noResultsText}},{key:"getDisplayErrorText",value:function(){var e,t,a,n;return null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(a=t.display)||void 0===a||null===(n=a.options)||void 0===n?void 0:n.errorText}},{key:"getDisplaySort",value:function(){var e,t,a,n;return null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(a=t.display)||void 0===a||null===(n=a.options)||void 0===n?void 0:n.sort}},{key:"getDisplayItemsToLoad",value:function(){var e,t,a,n;return null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(a=t.display)||void 0===a||null===(n=a.options)||void 0===n?void 0:n.itemsToLoad}},{key:"getDisplayResultComponent",value:function(){var e,t,a;return null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(a=t.display)||void 0===a?void 0:a.resultComponent}},{key:"getDisplayResultComponentType",value:function(){var e,t,a,n;return null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(a=t.display)||void 0===a||null===(n=a.resultComponent)||void 0===n?void 0:n.type}},{key:"getDisplayPagination",value:function(){var e,t,a,n;return null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(a=t.display)||void 0===a||null===(n=a.options)||void 0===n?void 0:n.pagination}},{key:"getKeepState",value:function(){var e,t;return null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t?void 0:t.keepState}},{key:"getDisplayResultComponentName",value:function(){var e=null;switch(this.getDisplayResultComponentType()){case"search-result":e="rpl-search-result";break;case"card":default:e="rpl-card-promo";break}return e}},{key:"getDisplayResultComponentColumns",value:function(){var e,t=null;switch(this.getDisplayResultComponentType()){case"card":var a=this.getDefault("DisplayResultComponentColumns");t=null!==(e=this.envConfig)&&void 0!==e&&e.sidebar?a.narrow:a.wide;break}return t}},{key:"getSortModelName",value:function(){return this.getDefault("ExposedControlSortModel")}},{key:"getItemsPerPageModelName",value:function(){return this.getDefault("ExposedControlItemsPerPageModel")}},{key:"getPaginationModelName",value:function(){return this.getDefault("ExposedControlPaginationModel")}},{key:"getDisplayPaginationComponentColumns",value:function(){var e,t=this.getDefault("DisplayPaginationComponentColumns");return null!==(e=this.envConfig)&&void 0!==e&&e.sidebar?t.narrow:t.wide}},{key:"getDisplayPaginationData",value:function(){var e=null,t=this.getDisplayPagination();if(t)switch(t.type){case"numbers":e={totalSteps:0,initialStep:1,stepsAround:2};break}return e}},{key:"getScrollToResults",value:function(){return this.getDefault("scrollToResults")}},{key:"getScrollToResultsOffsetHeight",value:function(){return this.getDefault("scrollToResultsOffsetHeight")}},{key:"pageChangeFocusSelector",value:function(){return this.getDefault("pageChangeFocusSelector")}},{key:"getDSL",value:function(e){var t,a,n=null;return n=null!==(t=this.config)&&void 0!==t&&null!==(a=t.internal)&&void 0!==a&&a.custom?this.config.internal.custom:this.getSimpleDSL(e),n}},{key:"getSimpleDSL",value:function(e){var t,a=this.envConfig.siteId,n=this.getSimpleDSLContentIds(),i=this.getSimpleDSLContentTypes(),l=this.getSimpleDSLContentFields(),s=this.getSimpleDSLCurrentPageFilter(),r=this.getSimpleDSLDateRange(),c=this.getSimpleDSLSort(e),d=this.getSimpleDSLExposedKeyword(e),p=this.getSimpleDSLExposedAdvancedFilters(e),f={query:{bool:{must:[],filter:[],must_not:[]}},sort:[],aggs:[]};(d&&f.query.bool.must.push(d),s&&f.query.bool.must_not.push(s),p)&&((t=f.query.bool.filter).push.apply(t,o(p.filters)),p.aggs&&(f.aggs=p.aggs));return a&&f.query.bool.filter.push({terms:{field_node_site:[a]}}),n&&f.query.bool.filter.push({terms:n}),i&&f.query.bool.filter.push({terms:i}),l.length>0&&l.forEach((function(e){f.query.bool.filter.push({terms:u({},e.fieldName,e.fieldConfig.values)})})),r.length>0&&r.forEach((function(e){f.query.bool.filter.push(e)})),c.length>0&&(f.sort=c),this.stripEmptyValues(f),f}},{key:"getSimpleDSLCurrentPageFilter",value:function(){var e,t,a,n=null,i=null===(e=this.config)||void 0===e||null===(t=e.internal)||void 0===t?void 0:t.includeCurrentPage,l=null===(a=this.envConfig)||void 0===a?void 0:a.currentPage;return!i&&l&&(n={match:{nid:l}}),n}},{key:"getSimpleDSLExposedKeyword",value:function(e){var t,a,n=null,i=null===(t=this.config)||void 0===t||null===(a=t.interface)||void 0===a?void 0:a.keyword;if("basic"===(null===i||void 0===i?void 0:i.type)){var l=this.getStateValue(e,"ExposedFilterKeywordModel");l&&(n={multi_match:{query:l,type:this.getDefault("ExposedFilterKeywordType"),fields:i.fields||this.getDefault("ExposedFilterKeywordDefaultFields")}})}return n}},{key:"getSimpleDSLExposedAdvancedFilters",value:function(e){var t,a,n,i=this,l=null,o=null===(t=this.config)||void 0===t||null===(a=t.interface)||void 0===a||null===(n=a.filters)||void 0===n?void 0:n.fields;if(o){var s=[],r=null;o.forEach((function(t){var a=t.options.model,n=e[a],l=t["elasticsearch-field"]||a,o=i.getSimpleDSLExposedAdvancedFiltersField(t,l,n);null!==o&&void 0!==o&&o.filter&&s.push(o.filter),null!==o&&void 0!==o&&o.agg&&(r||(r={}),r[a]=o.agg)})),l={filters:s,aggs:r}}return l}},{key:"getSimpleDSLExposedAdvancedFiltersField",value:function(e,t,a){var n=null;switch(e.type){case"basic":var i,l=null;if(Array.isArray(a)?a.length>0&&(i={terms:u({},t,a)}):a&&(i={terms:u({},t,[a])}),e["elasticsearch-aggregation"]){var o=e["elasticsearch-aggregation-order"]||this.getDefault("ExposedFilterAggregationOrder"),s=e["elasticsearch-aggregation-size"]||this.getDefault("ExposedFilterAggregationSize");l={terms:{field:t,order:{_key:o},size:s}}}n={filter:i,agg:l};break}return n}},{key:"getSimpleDSLContentIds",value:function(){var e,t=null;return null!==(e=this.config.internal)&&void 0!==e&&e.contentIds&&!this.config.internal.contentIds.some(isNaN)&&(t={nid:this.config.internal.contentIds}),t}},{key:"getSimpleDSLContentTypes",value:function(){var e,t=null;return null!==(e=this.config.internal)&&void 0!==e&&e.contentTypes&&(t={type:this.config.internal.contentTypes}),t}},{key:"getSimpleDSLContentFields",value:function(){var e,t=[];if(null!==(e=this.config.internal)&&void 0!==e&&e.contentFields)for(var a=0,n=Object.entries(this.config.internal.contentFields);a<n.length;a++){var i=l(n[a],2),o=i[0],s=i[1];t.push({fieldName:o,fieldConfig:s})}return t}},{key:"getSimpleDSLSort",value:function(e){var t=[],a=null,n=this.getStateValue(e,"ExposedControlSortModel");return a=n?this.getFieldValueFromId(n,this.getExposedSortValues()):this.getInternalSort(),a&&(t=a.map((function(e){return u({},e.field,e.direction)}))),t}},{key:"getSimpleDSLDateRange",value:function(){var e,t=[];if(null!==(e=this.config.internal)&&void 0!==e&&e.dateFilter){var a=this.config.internal.dateFilter,n=null,i=null,l=null;switch(a.criteria){case"range":n=a.dateRangeStart,i=a.dateRangeEnd||a.dateRangeStart;break;case"today":l=this.getStartEndDates("day"),n=l.start,i=l.end;break;case"this_week":l=this.getStartEndDates("week"),n=l.start,i=l.end;break;case"this_month":l=this.getStartEndDates("month"),n=l.start,i=l.end;break;default:console.log("Criteria not supported");break}n&&i&&(t.push({range:u({},a.startDateField,{gte:n})}),t.push({range:u({},a.endDateField,{lte:i})}))}return t}},{key:"getStartEndDates",value:function(e){return{start:p().startOf(e).format(),end:p().endOf(e).format()}}},{key:"getExposedFilterForm",value:function(){var e=null,t=[],a={},n=this.getExposedFilterGroups();return n.forEach((function(e){e.models&&e.models.forEach((function(t,n){a[t]=e.values[n]})),t.push(e.group)})),t.length>0&&(e={model:a,schema:{groups:t},formState:{}}),e}},{key:"getExposedFilterGroups",value:function(){var e=[this.getExposedFilterKeywordGroup(),this.getExposedFilterAdvancedFilterGroup(),this.getExposedFilterSubmissionGroup()];return e.filter((function(e){return null!==e}))}},{key:"getExposedFilterKeywordGroup",value:function(){var e,t,a=null,n=null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t?void 0:t.keyword;if(n){var i=this.getDefault("ExposedFilterKeywordModel");a={models:[i],values:[""],group:{fields:[{type:"input",inputType:"text",label:(null===n||void 0===n?void 0:n.label)||this.getDefault("ExposedFilterKeywordLabel"),placeholder:(null===n||void 0===n?void 0:n.placeholder)||this.getDefault("ExposedFilterKeywordPlaceholder"),model:i}]}}}return a}},{key:"getExposedFilterAdvancedFilterGroup",value:function(){var e,t,a,n=this,i=null,l=null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(a=t.filters)||void 0===a?void 0:a.fields;if((null===l||void 0===l?void 0:l.length)>0){var o=[],s=[],r=[];l.forEach((function(e){var t=n.getExposedFilterField(e);o.push(t.model),s.push(n.getExposedFilterFieldDefaultValue(e)),t&&r.push(t)})),i={models:o,values:s,group:{styleClasses:["app-content-collection__form-wrap"],fields:r}}}return i}},{key:"getExposedFilterFieldDefaultValue",value:function(e){var t="";return"basic"===e.type&&"rplselect"===e.options.type&&e.options.multiselect&&(t=[]),t}},{key:"getExposedFilterField",value:function(e){var t=null;switch(e.type){case"basic":var a=this.cloneObject(e.options);a.styleClasses=e.additionalClasses,t=a;break}return t}},{key:"getExposedFilterSubmissionGroup",value:function(){var e,t,a,n,i,l,o=null,s=[],r=null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(a=t.filters)||void 0===a?void 0:a.submit;"visible"===(null===r||void 0===r?void 0:r.visibility)&&s.push({type:"rplsubmitloader",buttonText:(null===r||void 0===r?void 0:r.label)||this.getDefault("ExposedFilterSubmitLabel"),loading:!1,autoUpdate:!0,styleClasses:["app-content-collection__form-inline"]});var u=null===(n=this.config)||void 0===n||null===(i=n.interface)||void 0===i||null===(l=i.filters)||void 0===l?void 0:l.clearForm;return"visible"===(null===u||void 0===u?void 0:u.visibility)&&s.push({type:"rplclearform",buttonText:(null===u||void 0===u?void 0:u.label)||this.getDefault("ExposedFilterClearFormLabel"),styleClasses:["app-content-collection__form-inline"]}),s.length>0&&(o={group:{styleClasses:["app-content-collection__form-wrap","app-content-collection__form-wrap-no-gutter"],fields:s}}),o}},{key:"getExposedFilterModelNames",value:function(){var e=[];return this.getExposedFilterGroups().forEach((function(t){t.models&&e.push.apply(e,o(t.models))})),e}},{key:"getExposedControlModelNames",value:function(){return this.getExposedControlFields().map((function(e){return e.model}))}},{key:"getExposedControlFields",value:function(){var e=[this.getExposedSortField(),this.getExposedItemsToLoadField()];return e.filter((function(e){return null!==e}))}},{key:"getExposedControlForm",value:function(){var e=null,t=[],a={},n=this.getExposedControlFields();return n.forEach((function(e){a[e.model]=e.value,t.push(e.field)})),t.length>0&&(t.push({type:"rplsubmitloader",buttonText:"Go",loading:!1,autoUpdate:!0,styleClasses:["app-content-collection__form-inline"]}),e={model:a,schema:{groups:[{styleClasses:["app-content-collection__form-wrap"],fields:t}]},formState:{}}),e}},{key:"getExposedControlValues",value:function(e){var t=this,a=null;return e&&(a=e.values.map((function(e){return{id:t.getIdName(e.name),name:e.name,value:e.value}}))),a}},{key:"getExposedSortValues",value:function(){return this.getExposedControlValues(this.getDisplaySort())}},{key:"getExposedItemsToLoadValues",value:function(){return this.getExposedControlValues(this.getDisplayItemsToLoad())}},{key:"getExposedFieldDefaultValue",value:function(e){var t="";return e.length>0&&(t=e[0].id),t}},{key:"getExposedSortField",value:function(){var e=null,t=this.getExposedSortValues();return t&&(e={model:this.getSortModelName(),value:this.getExposedFieldDefaultValue(t),field:{type:"rplselect",model:this.getSortModelName(),label:this.getDefault("ExposedControlSortLabel"),placeholder:this.getDefault("ExposedControlSortPlaceholder"),values:t.map((function(e){var t=e.id,a=e.name;return{id:t,name:a}})),styleClasses:["app-content-collection__form-inline"]}}),e}},{key:"getExposedItemsToLoadField",value:function(){var e=null,t=this.getExposedItemsToLoadValues();return t&&(e={model:this.getItemsPerPageModelName(),value:this.getExposedFieldDefaultValue(t),field:{type:"rplselect",model:this.getItemsPerPageModelName(),label:this.getDefault("ExposedControlItemsPerPageLabel"),placeholder:this.getDefault("ExposedControlItemsPerPagePlaceholder"),values:t.map((function(e){var t=e.id,a=e.name;return{id:t,name:a}})),styleClasses:["app-content-collection__form-inline"]}}),e}},{key:"getDefaultState",value:function(){var e={};this.getDisplayPagination()&&(e[this.getPaginationModelName()]=1),e[this.getSortModelName()]=this.getInitialSort(),e[this.getItemsPerPageModelName()]=this.getInitialItemsToLoad();var t=this.getExposedFilterGroups();return t.forEach((function(t){t.models&&t.models.forEach((function(a,n){e[a]=t.values[n]}))})),e}},{key:"getResults",value:function(){var e=i(regeneratorRuntime.mark((function e(t){var a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=null,n=this.getSearchRequest(t),e.next=4,this.searchClient(n);case 4:return i=e.sent,i&&(a={hits:i.hits.hits.map(this.mapResult.bind(this)),total:i.hits.total,aggregations:i.aggregations}),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"mapResult",value:function(e){var t,a,n,i,l,o,s,r,u=null,c=e._source,d=this.getLocalisedLinkFromSource(c);switch(this.getDisplayResultComponentType()){case"search-result":u={title:null===(t=c.title)||void 0===t?void 0:t[0],link:{linkText:d,linkUrl:d},date:null===(a=c.created)||void 0===a?void 0:a[0],description:null===(n=c.field_landing_page_summary)||void 0===n?void 0:n[0]};break;case"card":default:var p=null===(i=this.getDisplayResultComponent())||void 0===i?void 0:i.style;u={title:null===(l=c.title)||void 0===l?void 0:l[0],link:{text:d,url:d},dateStart:null===(o=c.created)||void 0===o?void 0:o[0],summary:null===(s=c.field_landing_page_summary)||void 0===s?void 0:s[0],image:null===(r=c.field_media_image_absolute_path)||void 0===r?void 0:r[0],displayStyle:p||this.getDefault("DisplayResultComponentCardStyle")};break}return u}},{key:"updateFiltersFromAggregation",value:function(e,t,a,n){var i=this;Object.keys(e).forEach((function(l){t.schema.groups.forEach((function(t){t.fields.forEach((function(t){if(t.model===l){var o=i.getAggregatedFilterValues(e[l].buckets,a[l]);t.values=o;var s=0===o.length;n(t,s)}}))}))}))}},{key:"getAggregatedFilterValues",value:function(e,t){var a=[];return e.length>0?a=e.map((function(e){var t=e.key,a=e.doc_count;return{id:t,name:"".concat(t," (").concat(a,")")}})):t&&Array.isArray(t)&&(a=t.map((function(e){return{id:e,name:"".concat(e," (0)")}}))),a}},{key:"getSearchRequest",value:function(e){return n({from:this.getStartingItem(e),size:this.getItemsToLoad(e),_source:[]},this.getDSL(e))}},{key:"getInitialControlValue",value:function(e,t,a){var n=e;if(t){var i=this.getExposedFieldDefaultValue(a);i&&(n=i)}return n}},{key:"getInitialSort",value:function(){var e=this.getInternalSort();return this.getInitialControlValue(e,this.getDisplaySort(),this.getExposedSortValues())}},{key:"getInitialItemsToLoad",value:function(){var e=this.getInternalItemsToLoad()||this.getDefault("ItemsToLoad");return this.getInitialControlValue(e,this.getDisplayItemsToLoad(),this.getExposedItemsToLoadValues())}},{key:"getFieldValueFromId",value:function(e,t){var a=null;if(t)for(var n=0;n<t.length;n++)if(t[n].id===e){a=t[n].value;break}return a}},{key:"getItemsToLoad",value:function(e){var t=this.getInitialItemsToLoad(),a=this.getStateValue(e,"ExposedControlItemsPerPageModel");return a&&(t=this.getFieldValueFromId(a,this.getExposedItemsToLoadValues())),t}},{key:"getStartingItem",value:function(e){var t=0,a=e[this.getPaginationModelName()];return a&&(t=(a-1)*this.getItemsToLoad(e)),t}},{key:"getResultCountRange",value:function(e,t){var a=!1;if(t&&t>0){var n=e[this.getPaginationModelName()]||1,i=this.getItemsToLoad(e),l=n<2?1:i*(n-1)+1,o=i*n,s=o>t?t:o;a="".concat(l,"-").concat(s)}return a}},{key:"getProcessedResultsCount",value:function(e,t){var a=null;if(t>0&&(a=this.getDisplayResultCountText(),a)){var n=this.getResultCountRange(e,t);a=a.replace("{range}",n),a=a.replace("{count}",t)}return a}},{key:"getPaginationTotalSteps",value:function(e,t){return Math.ceil(parseInt(t)/this.getItemsToLoad(e))}}]),e}()},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("ac1f"),a("841c");var n=a("a026"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},l=[],o=a("2877"),s={},r=Object(o["a"])(s,i,l,!1,null,null,null),u=r.exports,c=(a("3328"),a("1872")),d=a("8c4f"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"controls"},[a("div",{staticClass:"controls__inner"},[a("div",{staticClass:"controls__left"},[a("label",[a("span",[e._v("Elasticsearch config:")]),a("prism-editor",{staticClass:"code-editor",attrs:{highlight:e.highlighter,"line-numbers":""},model:{value:e.customES,callback:function(t){e.customES=t},expression:"customES"}})],1),a("label",[a("span",[e._v("Environment config:")]),a("prism-editor",{staticClass:"code-editor",attrs:{highlight:e.highlighter,"line-numbers":""},model:{value:e.customEnvironment,callback:function(t){e.customEnvironment=t},expression:"customEnvironment"}})],1)]),a("div",{staticClass:"controls__right"},[a("label",[a("span",[e._v("Schema config:")]),a("prism-editor",{staticClass:"code-editor",attrs:{highlight:e.highlighter,"line-numbers":""},model:{value:e.customSchema,callback:function(t){e.customSchema=t},expression:"customSchema"}})],1)])]),a("button",{on:{click:e.updateSchema}},[e._v("Update Schema")])]),a("div",{staticClass:"display"},[e.schema?a("content-collection",{key:e.count,attrs:{schema:e.schema,environment:e.environment}}):e._e()],1)])},f=[],h=a("e57a"),g=(a("cabf"),a("8c7a")),m=(a("cb55"),a("f393"),a("6b2c"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-content-collection"},[a("div",{staticClass:"app-content-collection__header"},[a("div",{staticClass:"app-content-collection__header-left"},[e.title?a("h2",{staticClass:"app-content-collection__heading"},[e._v(e._s(e.title))]):e._e(),e.description?a("p",[e._v(e._s(e.description))]):e._e()]),a("div",{staticClass:"app-content-collection__header-right"},[e.cta?a("rpl-link",{attrs:{href:e.cta.url}},[e._v(e._s(e.cta.text))]):e._e()],1)]),e.exposedFilterFormData?a("rpl-form",{attrs:{formData:e.exposedFilterFormData,submitHandler:e.exposedFilterFormSubmit}}):e._e(),e.exposedFilterFormData?a("rpl-divider"):e._e(),a("rpl-search-results-layout",{ref:"search-results",attrs:{searchResults:e.results,error:e.error,noResultsMsg:e.noResultsText,loading:e.resultsLoading},scopedSlots:e._u([e.resultCount?{key:"count",fn:function(){return[e._v(e._s(e.resultCount))]},proxy:!0}:null,{key:"sort",fn:function(){return[e.exposedControlFormData?a("rpl-form",{attrs:{formData:e.exposedControlFormData,submitHandler:e.exposedControlsFormSubmit,listenForClearForm:!1}}):e._e()]},proxy:!0},{key:"loading",fn:function(){return[e._v(e._s(e.loadingText))]},proxy:!0},{key:"results",fn:function(t){return[e._t("results",(function(){return e._l(t.searchResults,(function(t,n){return a("rpl-col",{key:n+"-result",attrs:{colsBp:e.resultColumns}},[a(e.resultComponentName,e._b({tag:"component",staticClass:"app-content-collection__search-result"},"component",t,!1))],1)}))}),{searchResults:t.searchResults})]}},{key:"pagination",fn:function(){return[a("rpl-col",{attrs:{cols:"full",colsBp:e.paginationColumns}},[e.showPagination?a("rpl-pagination",e._b({on:{change:e.paginationChange}},"rpl-pagination",e.paginationData,!1)):e._e()],1)]},proxy:!0}],null,!0)}),e.isInteractive?a("div",{staticClass:"rpl-visually-hidden",attrs:{"aria-live":"polite"}},[e._v(e._s(e.announcerText))]):e._e()],1)}),v=[],y=a("1da1"),b=(a("5319"),a("96cf"),a("39a6")),S=a("6e67"),x=a("983e"),k=a("8b92"),C=a("ade3"),_=a("d4ec"),j=a("bee2"),E=a("45eb"),D=a("7e84"),F=a("262e"),T=a("2caf"),R=(a("159b"),a("d3b7"),a("ddb0"),a("4e7f")),w=a.n(R),L=a("5a0c"),O=function(e){Object(F["a"])(a,e);var t=Object(T["a"])(a);function a(){return Object(_["a"])(this,a),t.apply(this,arguments)}return Object(j["a"])(a,[{key:"getDisplayResultComponentName",value:function(){var e=null;switch(this.getDisplayResultComponentType()){case"vh-search-result":e="vh-search-result";break;default:e=Object(E["a"])(Object(D["a"])(a.prototype),"getDisplayResultComponentName",this).call(this);break}return e}},{key:"mapResult",value:function(e){var t=null,n=e._source,i=this.getLocalisedLink(n.url);switch(this.getDisplayResultComponentType()){case"vh-search-result":t=this.vhSearchResultMapping(e,i);break;default:t=Object(E["a"])(Object(D["a"])(a.prototype),"mapResult",this).call(this,e);break}return t}},{key:"vhSearchResultMapping",value:function(e,t){var a,n,i,l=null===(a=this.config.interface)||void 0===a||null===(n=a.display)||void 0===n||null===(i=n.resultComponent)||void 0===i?void 0:i.options;return{icon:l.icon?this.getVhSearchResultValue(l.icon,e):null,title:l.title?this.getVhSearchResultValue(l.title,e):null,link:{linkText:t,linkUrl:t},date:l.date?this.getVhSearchResultValue(l.date,e):null,subTop:l.subTop?this.getVhSearchResultValue(l.subTop,e):null,summary:l.summary?this.getVhSearchResultValue(l.summary,e):null,subBottom:l.subBottom?this.getVhSearchResultValue(l.subBottom,e):null}}},{key:"getVhSearchResultValue",value:function(e,t){var a,n,i,l,o=this,s=null;switch(e.type){case"icon":s=e.symbol;break;case"text":s=null===(a=t._source)||void 0===a||null===(n=a[e.field])||void 0===n?void 0:n[0];break;case"date":s=L(null===(i=t._source)||void 0===i||null===(l=i[e.field])||void 0===l?void 0:l[0]).format(e.format);break;case"formatted":var r=e.format;e.fields.forEach((function(e){var a=e.field,n=o.getVhSearchResultValue(e,t);r=r.replace("{".concat(a,"}"),n||"")})),s=r;break}return s}},{key:"getExposedFilterField",value:function(e){var t=null;switch(e.type){case"a-z":var n=this.cloneObject(e.options);n.values=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.type=n.type||"rploptionbutton",n.label=n.label||"Starting Letter",n.styleClasses=e.additionalClasses||"app-content-collection__form-col-full",t=n;break;default:t=Object(E["a"])(Object(D["a"])(a.prototype),"getExposedFilterField",this).call(this,e);break}return t}},{key:"getSimpleDSLExposedAdvancedFiltersField",value:function(e,t,n){var i=null;switch(e.type){case"a-z":n&&(i={filter:{prefix:Object(C["a"])({},t,n)}});break;default:i=Object(E["a"])(Object(D["a"])(a.prototype),"getSimpleDSLExposedAdvancedFiltersField",this).call(this,e,t,n);break}return i}}]),a}(w.a),P=a("e0a2"),A=a("f031"),I=a("0d41"),M={name:"AppContentCollection",mixins:[k["a"]],components:{RplLink:b["a"],RplForm:S["a"],RplCol:x["a"],RplDivider:c["b"],RplSearchResultsLayout:A["b"],RplSearchResult:A["a"],RplCardPromo:I["RplCardPromo"],RplPagination:P["a"]},props:{schema:Object,environment:Object,preloadSearchResponse:Object,sidebar:{type:Boolean,default:!1}},data:function(){var e=this.searchEndpoint.bind(this),t=new O(this.schema,e,this.environment);return{dataManager:t,defaultState:t.getDefaultState(),state:t.getDefaultState(),results:[],resultTotal:null,resultCount:null,resultsLoading:!1,error:null,announcerText:"",scrollOnNextLoad:!1,scrollOnPaginationChange:!1,scrollOffset:t.getScrollToResultsOffsetHeight(),pageChangeFocusSelector:t.pageChangeFocusSelector(),exposedFilterFormData:t.getExposedFilterForm(),exposedControlFormData:t.getExposedControlForm(),exposedControlModels:t.getExposedControlModelNames(),exposedFilterModels:t.getExposedFilterModelNames(),paginationData:t.getDisplayPaginationData(),useRouter:t.getKeepState()}},computed:{title:function(){return this.dataManager.getTitle()},description:function(){return this.dataManager.getDescription()},cta:function(){return this.dataManager.getCTA()},loadingText:function(){return this.dataManager.getDisplayLoadingText()},noResultsText:function(){return this.dataManager.getDisplayNoResultsText()},errorText:function(){return this.dataManager.getDisplayErrorText()},resultComponentName:function(){return this.dataManager.getDisplayResultComponentName()},resultColumns:function(){return this.dataManager.getDisplayResultComponentColumns()},paginationColumns:function(){return this.dataManager.getDisplayPaginationComponentColumns()},showPagination:function(){return this.paginationData&&this.paginationData.totalSteps>1},paginationModelName:function(){return this.dataManager.getPaginationModelName()},isInteractive:function(){return!!this.exposedFilterFormData||!!this.exposedControlFormData||!!this.paginationData}},methods:{searchEndpoint:function(e){return this.$tideSearchApi.searchByPost(e)},getResults:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.resultsLoading=!0,e.announcerText="",t.next=4,e.dataManager.getResults(e.state);case 4:a=t.sent,a?(e.error=null,e.updateInterfaceFromSearchResponse(a),e.announcerText=a.total>0?e.resultCount:e.noResultsText):(e.error={message:e.errorText},e.announcerText=e.errorText),e.resultsLoading=!1,e.scrollOnNextLoad&&(e.scrollOnNextLoad=!1,e.moveToTopOfResults());case 8:case"end":return t.stop()}}),t)})))()},moveToTopOfResults:function(){var e=this;if(this.scrollOnPaginationChange){var t,a=null===(t=this.$refs["search-results"])||void 0===t?void 0:t.$el;a&&this.$nextTick((function(){if(window.scrollTo({top:a.offsetTop-e.scrollOffset}),e.pageChangeFocusSelector){var t=a.querySelector(e.pageChangeFocusSelector);t&&t.focus()}}))}},updateInterfaceFromSearchResponse:function(e){this.results=e.hits,this.resultCount=this.dataManager.getProcessedResultsCount(this.state,e.total),this.exposedFilterFormData&&e.aggregations&&this.dataManager.updateFiltersFromAggregation(e.aggregations,this.exposedFilterFormData,this.state,(function(e,t){n["default"].set(e,"disabled",t)})),this.paginationData&&(this.paginationData.totalSteps=this.dataManager.getPaginationTotalSteps(this.state,e.total))},syncTo:function(e,t,a){return this.dataManager.syncObject(e,t,a)},resetPagination:function(){this.state[this.paginationModelName]=1},setPaginationFromState:function(){this.paginationData&&(this.paginationData.initialStep=parseInt(this.state[this.paginationModelName]))},paginationChange:function(e){this.scrollOnNextLoad=!0,this.syncTo({page:e},this.state),this.updateQuery()},exposedFilterFormSubmit:function(){this.syncTo(this.exposedFilterFormData.model,this.state),this.resetPagination(),this.updateQuery()},exposedControlsFormSubmit:function(){this.syncTo(this.exposedControlFormData.model,this.state),this.resetPagination(),this.updateQuery()},updateQuery:function(){var e=this.dataManager.getDiffObject(this.state,this.defaultState);this.useRouter?this.$router.replace({query:e}):(this.syncQueryState(e),this.getResults())},syncQueryState:function(e){this.syncTo(this.dataManager.getTypeCorrectedQuery(e,this.defaultState),this.state),this.exposedFilterFormData&&this.syncTo(this.state,this.exposedFilterFormData.model,this.exposedFilterModels),this.exposedControlFormData&&this.syncTo(this.state,this.exposedControlFormData.model,this.exposedControlModels),this.setPaginationFromState()},initializeScrollOnPageChange:function(){this.scrollOnPaginationChange=this.dataManager.getScrollToResults()}},watch:{$route:function(e,t){this.syncQueryState(e.query),this.getResults()}},created:function(){this.useRouter&&this.syncQueryState(this.$route.query),this.preloadSearchResponse&&(this.updateInterfaceFromSearchResponse(this.preloadSearchResponse),this.initializeScrollOnPageChange())},mounted:function(){this.preloadSearchResponse||this.getResults().then(this.initializeScrollOnPageChange.bind(this))}},N=M,V=(a("0aff"),Object(o["a"])(N,m,v,!1,null,null,null)),z=V.exports,H=a("79e7"),q=a("9940"),U=a("2ec7"),$={name:"App",components:{PrismEditor:h["a"],ContentCollection:z},data:function(){return{customES:JSON.stringify(U,null,2),customEnvironment:JSON.stringify(q,null,2),customSchema:JSON.stringify(H,null,2),environment:null,schema:null,count:0}},methods:{updateSchema:function(){var e=JSON.parse(this.customES);e&&this.$tideSearchApi.setParams(e);var t=JSON.parse(this.customEnvironment);t&&(this.environment=t);var a=JSON.parse(this.customSchema);a&&(this.schema=a),this.count++},highlighter:function(e){return Object(g["highlight"])(e,g["languages"].json)}},mounted:function(){this.updateSchema()}},K=$,B=(a("21bb"),Object(o["a"])(K,p,f,!1,null,null,null)),J=B.exports,G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("content-collection",{attrs:{schema:e.schema,environment:e.environment}})],1)},Q=[],Y={name:"App",components:{ContentCollection:z},data:function(){return{environment:{siteId:"4",primarySiteId:"4",domains:{4:""}},schema:{title:"Health Alerts",description:"Aliqua commodo mollit enim nulla minim sit ut ullamco ea dolore non consectetur eu laborum. ",callToAction:{text:"View all",url:"/search"},internal:{itemsToLoad:20,contentTypes:["health_alert"],sort:[{field:"created",direction:"desc"}]},interface:{keyword:{type:"basic",label:"Search by keyword",placeholder:"Enter keyword(s)"},filters:{submit:{visibility:"visible",label:"Apply change"},clearForm:{visibility:"visible",label:"Clear search"},fields:[{type:"basic",options:{model:"field_health_status",type:"rplselect",label:"Health alert status",placeholder:"Select an alert status",values:[{id:"active",name:"Active"},{id:"resolved",name:"Resolved"}]},additionalClasses:["app-content-collection__form-col-3"],"elasticsearch-field":"type","elasticsearch-aggregation":!1},{type:"basic",options:{model:"field_health_type",type:"rplselect",label:"Health alert type",placeholder:"Select an alert type",values:[{id:"health-alerts",name:"Alert"},{id:"health-advisories",name:"Advisory"}]},additionalClasses:["app-content-collection__form-col-3"],"elasticsearch-field":"field_health_type","elasticsearch-aggregation":!1}]},display:{type:"grid",options:{resultsCountText:"Displaying {range} of {count} results",loadingText:"Loading",noResultsText:"Sorry! We couldn't find any matches",errorText:"Search isn't working right now, please try again later.",sort:{type:"field",values:[{name:"Relevance",value:null},{name:"Title A-Z",value:[{field:"title.keyword",direction:"asc"}]},{name:"Title Z-A",value:[{field:"title.keyword",direction:"desc"}]},{name:"Newest",value:[{field:"created",direction:"desc"}]},{name:"Oldest",value:[{field:"created",direction:"asc"}]}]},itemsToLoad:{type:"field",values:[{name:"1",value:1},{name:"2",value:2},{name:"5",value:5},{name:"10",value:10},{name:"20",value:20},{name:"50",value:50},{name:"All",value:9999}]},pagination:{type:"numbers"}},resultComponent:{type:"vh-search-result",options:{title:{type:"text",field:"title"},summary:{type:"formatted",fields:[{type:"date",field:"changed",format:"DD MMM YYYY"},{type:"text",field:"field_health_type"},{type:"date",field:"created",format:"DD MMMM YYYY"}],format:"{changed} - Update to <code>{field_health_type}</code> issued {created}"},subBottom:{type:"formatted",fields:[{type:"text",field:"field_health_status"},{type:"text",field:"field_health_type"},{type:"text",field:"field_health_alert_number"}],format:"{field_health_status} | {field_health_type} {field_health_alert_number}"}}}}}}}}},W=Y,Z=Object(o["a"])(W,G,Q,!1,null,null,null),X=Z.exports;n["default"].use(d["a"]);var ee=[{path:"/",name:"Home",component:J},{path:"/health-alerts",name:"Health alerts",component:X}],te=new d["a"]({routes:ee}),ae=te,ne=a("6760"),ie=a.n(ne),le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vh-search-result"},[a("rpl-link",{attrs:{href:e.link.linkUrl}},[a("h2",{staticClass:"vh-search-result__heading"},[e._v(e._s(e.title))])]),a("div",{staticClass:"vh-search-result__sub-top"},[e._v(e._s(e.subTop))]),a("div",{staticClass:"vh-search-result__summary",domProps:{innerHTML:e._s(e.summary)}}),a("div",{staticClass:"vh-search-result__sub-bottom"},[e._v(e._s(e.subBottom))]),e.tags?a("ul",{staticClass:"vh-search-result__terms"},e._l(e.tags,(function(e,t){return a("li",{key:t,staticClass:"vh-search-result__term"},[a("rpl-meta-tag",{attrs:{linkText:e.linkText,linkUrl:e.linkUrl}})],1)})),0):e._e()],1)},oe=[],se=a("8989"),re={name:"VhSearchResult",props:{title:String,link:Object,date:String,summary:String,tags:Array,icon:String,subTop:String,subBottom:String},components:{RplLink:b["e"],RplMetaTag:se["a"]}},ue=re,ce=(a("6590"),Object(o["a"])(ue,le,oe,!1,null,null,null)),de=ce.exports;n["default"].config.productionTip=!1,n["default"].use(c["c"],{}),n["default"].component("vh-search-result",de);var pe={searchByPost:function(e){return ie.a.search(e)},setParams:function(e){ie.a.setESParams(e)}};n["default"].mixin({beforeCreate:function(){var e=this.$options;e.tideSearchApi?this.$tideSearchApi=e.tideSearchApi:e.parent&&e.parent.$tideSearchApi&&(this.$tideSearchApi=e.parent.$tideSearchApi)}}),new n["default"]({router:ae,tideSearchApi:pe,render:function(e){return e(u)}}).$mount("#app")},6590:function(e,t,a){"use strict";a("3318")},6760:function(e,t,a){var n=a("c973").default;a("96cf"),a("99af"),a("4e82"),a("ac1f"),a("841c");var i=a("f94d"),l="",o="",s="",r="",u="";e.exports={setESParams:function(e){l=e.SEARCH_URL,o=e.SEARCH_AUTH_USERNAME,s=e.SEARCH_AUTH_PASSWORD,r=e.SEARCH_INDEX,u=e.SEARCH_HASH},search:function(e){return n(regeneratorRuntime.mark((function t(){var a,n,c,d,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="https://"+u+"."+l,n={host:a,apiVersion:"7.6",httpAuth:"".concat(o,":").concat(s)},c=new i.Client(n),t.prev=3,d={},d.index=void 0===e.index?r:e.index,d.from=e.from,d.size=e.size,d._source=e._source,d.body={query:e.query,sort:e.sort,aggs:e.aggs},t.next=12,c.search(d);case 12:return p=t.sent,t.abrupt("return",p);case 16:return t.prev=16,t.t0=t["catch"](3),console.trace(t.t0.message),t.abrupt("return",null);case 20:case"end":return t.stop()}}),t,null,[[3,16]])})))()}}},"79e7":function(e){e.exports=JSON.parse('{"title":"Content Collection","internal":{},"interface":{"keepState":true,"keyword":{"type":"basic","label":"Search by keyword","placeholder":"Enter keyword(s)"},"filters":{"submit":{"visibility":"visible","label":"Apply change"},"clearForm":{"visibility":"visible","label":"Clear search"},"fields":[{"type":"basic","options":{"model":"type","type":"rplselect","label":"Type","hint":"The content type to filter by","placeholder":"Select type","values":[{"id":"landing_page","name":"Landing Page"},{"id":"news","name":"News"}]},"additionalClasses":["app-content-collection__form-col-3"],"elasticsearch-field":"type","elasticsearch-aggregation":false},{"type":"basic","options":{"model":"field_tags_name","type":"rplselect","multiselect":true,"label":"Tags","placeholder":"Select some tags","values":[]},"additionalClasses":["app-content-collection__form-col-3"],"elasticsearch-field":"field_tags_name","elasticsearch-aggregation":true},{"type":"basic","options":{"model":"field_topic_name","type":"rplselect","multiselect":true,"label":"Topic","placeholder":"Select a topic","values":[]},"additionalClasses":["app-content-collection__form-col-3"],"elasticsearch-field":"field_topic","elasticsearch-aggregation":true}]},"display":{"type":"grid","options":{"resultsCountText":"Displaying {range} of {count} results","loadingText":"Loading","noResultsText":"Sorry! We couldn\'t find any matches","errorText":"Search isn\'t working right now, please try again later.","sort":{"type":"field","values":[{"name":"Relevance","value":null},{"name":"Title A-Z","value":[{"field":"title.keyword","direction":"asc"}]},{"name":"Title Z-A","value":[{"field":"title.keyword","direction":"desc"}]},{"name":"Newest","value":[{"field":"created","direction":"desc"}]},{"name":"Oldest","value":[{"field":"created","direction":"asc"}]}]},"itemsToLoad":{"type":"field","values":[{"name":"12","value":12},{"name":"24","value":24}]},"pagination":{"type":"numbers"}},"resultComponent":{"type":"card"}}}}')},"858a":function(e,t,a){},9940:function(e){e.exports=JSON.parse('{"siteId":"4","domains":{"4":""},"currentPage":"","sidebar":false}')}});