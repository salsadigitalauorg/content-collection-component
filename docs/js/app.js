(function(e){function t(t){for(var i,a,s=t[0],l=t[1],u=t[2],c=0,d=[];c<s.length;c++)a=s[c],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);p&&p(t);while(d.length)d.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,a=1;a<n.length;a++){var s=n[a];0!==o[s]&&(i=!1)}i&&(r.splice(t--,1),e=l(l.s=n[0]))}return e}var i={},a={app:0},o={app:0},r=[];function s(e){return l.p+"js/"+({"rpl-card-promotion":"rpl-card-promotion"}[e]||e)+".js"}function l(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={"rpl-card-promotion":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var i="css/"+({"rpl-card-promotion":"rpl-card-promotion"}[e]||e)+".css",o=l.p+i,r=document.getElementsByTagName("link"),s=0;s<r.length;s++){var u=r[s],c=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(c===i||c===o))return t()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){u=d[s],c=u.getAttribute("data-href");if(c===i||c===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var i=t&&t.target&&t.target.src||o,r=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=i,delete a[e],p.parentNode.removeChild(p),n(r)},p.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){a[e]=0})));var i=o[e];if(0!==i)if(i)t.push(i[2]);else{var r=new Promise((function(t,n){i=o[e]=[t,n]}));t.push(i[2]=r);var u,c=document.createElement("script");c.charset="utf-8",c.timeout=120,l.nc&&c.setAttribute("nonce",l.nc),c.src=s(e);var d=new Error;u=function(t){c.onerror=c.onload=null,clearTimeout(p);var n=o[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",d.name="ChunkLoadError",d.type=i,d.request=a,n[1](d)}o[e]=void 0}};var p=setTimeout((function(){u({type:"timeout",target:c})}),12e4);c.onerror=c.onload=u,document.head.appendChild(c)}return Promise.all(t)},l.m=e,l.c=i,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)l.d(n,i,function(t){return e[t]}.bind(null,i));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/content-collection-component/",l.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var p=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0aff":function(e,t,n){"use strict";n("858a")},1:function(e,t){},2:function(e,t){},"21bb":function(e,t,n){"use strict";n("2dad")},"26f1":function(e,t){e.exports={wide:{m:6,l:4,xxxl:3},narrow:{m:6,xxxl:4}}},"2dad":function(e,t,n){},"2ec7":function(e){e.exports=JSON.parse('{"SEARCH_URL":"elastic.sdp2.sdp.vic.gov.au","SEARCH_AUTH_USERNAME":"","SEARCH_AUTH_PASSWORD":"","SEARCH_INDEX":"elasticsearch_index_nonprod_node","SEARCH_HASH":"a83890f7a31dea14e1ae83c6f0afacca"}')},3:function(e,t){},3318:function(e,t,n){},4678:function(e,t,n){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6b","./en-gb.js":"39a6b","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=o,e.exports=a,a.id="4678"},"4e7f":function(e,t,n){var i=n("ded3").default,a=n("c973").default,o=n("278c").default,r=n("448a").default,s=n("7037").default,l=n("6374").default,u=n("9523").default,c=n("970b").default,d=n("5bc3").default;n("96cf"),n("159b"),n("b64b"),n("d3b7"),n("25f0"),n("a4d3"),n("e01a"),n("4e82"),n("4de4"),n("ddb0"),n("4fad"),n("d81d"),n("b0c0"),n("99af"),n("ac1f"),n("5319");var p=n("5a0c"),f=n("26f1");e.exports=function(){"use strict";function e(t,n,i){if(c(this,e),this.config=t,this.searchClient=n,this.envConfig=i,this.defaults={EnvironmentSiteId:"4",ResultItemFieldNameUrl:"url",ResultItemFieldNamePrimarySite:"field_node_primary_site",ExposedFilterKeywordLabel:"Search by keyword",ExposedFilterKeywordPlaceholder:"Enter keywords",ExposedFilterSubmitLabel:"Filter results",ExposedFilterClearFormLabel:"Clear search filters",ExposedControlSortModel:"sort",ExposedControlSortLabel:"Sort",ExposedControlSortPlaceholder:"Select a value",ExposedControlItemsPerPageModel:"items_per_page",ExposedControlItemsPerPageLabel:"Items per page",ExposedControlItemsPerPagePlaceholder:"Select a value",ExposedControlPaginationModel:"page",ExposedFilterKeywordModel:"q",ExposedFilterKeywordType:"phrase_prefix",ExposedFilterKeywordDefaultFields:["title","body","summary_processed","field_landing_page_summary","field_paragraph_summary","field_page_intro_text","field_paragraph_body"],ExposedFilterAggregationOrder:"asc",ExposedFilterAggregationSize:30,DisplayResultComponentCardStyle:"noImage",DisplayResultComponentColumns:f,DisplayPaginationComponentColumns:f,ItemsToLoad:12,scrollToResults:!0,scrollToResultsOffsetHeight:102,pageChangeFocusSelector:"a"},!this.searchClient)throw Error("Content Collection Error: A search client function is required.");if(!this.envConfig){console.warn("Content Collection Error: Environmental variables are required. Falling back to default.");var a=this.getDefault("EnvironmentSiteId");this.envConfig={siteId:a,domains:u({},a,"")}}}return d(e,[{key:"getLocalDomainURL",value:function(e,t,n,i){var a="",o="";if(e&&e.length>0){var r,s={},u=l(e);try{for(u.s();!(r=u.n()).done;){var c=r.value,d=c.substring(c.indexOf("-")+1,c.indexOf("/",2)),p=c.substring(c.indexOf("/",2));s[d]=p}}catch(f){u.e(f)}finally{u.f()}t in s?(a=i[t],o=s[t]):n&&(a=i[n],o="//"+a+s[n])}return{domain:a,path:o}}},{key:"getLocalisedLink",value:function(e,t){var n=null;if((null===e||void 0===e?void 0:e.length)>0){var i=this.envConfig;n=i.siteId&&i.domains?this.getLocalDomainURL(e,i.siteId,t,i.domains):{domain:"",path:e[0]}}return n}},{key:"getLocalisedLinkFromSource",value:function(e,t,n){var i=t||this.getDefault("ResultItemFieldNameUrl"),a=n||this.getDefault("ResultItemFieldNamePrimarySite"),o=this.getLocalisedLink(e[i],e[a]);return o}},{key:"cloneObject",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"stripEmptyValues",value:function(e){var t=this;Object.keys(e).forEach((function(n){null===e[n]||""===e[n]?delete e[n]:Array.isArray(e[n])?0===e[n].length&&delete e[n]:"object"===s(e[n])&&t.stripEmptyValues(e[n])}))}},{key:"getNewValue",value:function(e){return Array.isArray(e)?r(e):e}},{key:"syncObject",value:function(e,t,n){var i=this;Object.keys(e).forEach((function(a){var o=!n||n.indexOf(a)>=0;o&&(t[a]=i.getNewValue(e[a]))}))}},{key:"getDiffObject",value:function(e,t){var n={};return Object.keys(e).forEach((function(i){e[i]!==t[i]&&(n[i]=e[i])})),this.stripEmptyValues(n),n}},{key:"getTypeCorrectedQuery",value:function(e,t){var n={};return Object.keys(e).forEach((function(i){Array.isArray(t[i])&&!Array.isArray(e[i])?n[i]=[e[i]]:n[i]=e[i]})),n}},{key:"getIdName",value:function(e){return e.toString()}},{key:"getDefault",value:function(e){return this.defaults[e]}},{key:"getStateValue",value:function(e,t){return null===e||void 0===e?void 0:e[this.getDefault(t)]}},{key:"getTitle",value:function(){return this.config.title}},{key:"getDescription",value:function(){return this.config.description}},{key:"getCTA",value:function(){return this.config.callToAction}},{key:"getDisplayType",value:function(){var e,t,n;return null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(n=t.display)||void 0===n?void 0:n.type}},{key:"getInternalSort",value:function(){var e,t;return null===(e=this.config)||void 0===e||null===(t=e.internal)||void 0===t?void 0:t.sort}},{key:"getInternalItemsToLoad",value:function(){var e,t;return null===(e=this.config)||void 0===e||null===(t=e.internal)||void 0===t?void 0:t.itemsToLoad}},{key:"getDisplayResultCountText",value:function(){var e,t,n,i;return null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(n=t.display)||void 0===n||null===(i=n.options)||void 0===i?void 0:i.resultsCountText}},{key:"getDisplayLoadingText",value:function(){var e,t,n,i;return null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(n=t.display)||void 0===n||null===(i=n.options)||void 0===i?void 0:i.loadingText}},{key:"getDisplayNoResultsText",value:function(){var e,t,n,i;return null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(n=t.display)||void 0===n||null===(i=n.options)||void 0===i?void 0:i.noResultsText}},{key:"getDisplayErrorText",value:function(){var e,t,n,i;return null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(n=t.display)||void 0===n||null===(i=n.options)||void 0===i?void 0:i.errorText}},{key:"getDisplaySort",value:function(){var e,t,n,i;return null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(n=t.display)||void 0===n||null===(i=n.options)||void 0===i?void 0:i.sort}},{key:"getDisplayItemsToLoad",value:function(){var e,t,n,i;return null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(n=t.display)||void 0===n||null===(i=n.options)||void 0===i?void 0:i.itemsToLoad}},{key:"getDisplayResultComponent",value:function(){var e,t,n;return null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(n=t.display)||void 0===n?void 0:n.resultComponent}},{key:"getDisplayResultComponentType",value:function(){var e,t,n,i;return null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(n=t.display)||void 0===n||null===(i=n.resultComponent)||void 0===i?void 0:i.type}},{key:"getDisplayPagination",value:function(){var e,t,n,i;return null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(n=t.display)||void 0===n||null===(i=n.options)||void 0===i?void 0:i.pagination}},{key:"getKeepState",value:function(){var e,t;return null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t?void 0:t.keepState}},{key:"getSkipToResultLink",value:function(){var e,t,n,i,a,o,r=null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t?void 0:t.skipToResultLink,s=(null===(n=this.config)||void 0===n||null===(i=n.interface)||void 0===i?void 0:i.keyword)||(null===(a=this.config)||void 0===a||null===(o=a.interface)||void 0===o?void 0:o.filters),l=void 0===r||r;return l&&s}},{key:"getSkipToResultLinkID",value:function(){var e,t=null===(e=this.envConfig)||void 0===e?void 0:e.skipToResultLinkID;return void 0!==t?t:"content-collection-results"}},{key:"getDisplayResultComponentName",value:function(){var e=null;switch(this.getDisplayResultComponentType()){case"search-result":e="rpl-search-result";break;case"card":default:e="rpl-card-promo";break}return e}},{key:"getDisplayResultComponentColumns",value:function(){var e,t=null;switch(this.getDisplayResultComponentType()){case"card":var n=this.getDefault("DisplayResultComponentColumns");t=null!==(e=this.envConfig)&&void 0!==e&&e.sidebar?n.narrow:n.wide;break}return t}},{key:"getSortModelName",value:function(){return this.getDefault("ExposedControlSortModel")}},{key:"getItemsPerPageModelName",value:function(){return this.getDefault("ExposedControlItemsPerPageModel")}},{key:"getPaginationModelName",value:function(){return this.getDefault("ExposedControlPaginationModel")}},{key:"getDisplayPaginationComponentColumns",value:function(){var e,t=this.getDefault("DisplayPaginationComponentColumns");return null!==(e=this.envConfig)&&void 0!==e&&e.sidebar?t.narrow:t.wide}},{key:"getDisplayPaginationData",value:function(){var e=null,t=this.getDisplayPagination();if(t)switch(t.type){case"numbers":e={totalSteps:0,initialStep:1,stepsAround:2};break}return e}},{key:"getScrollToResults",value:function(){return this.getDefault("scrollToResults")}},{key:"getScrollToResultsOffsetHeight",value:function(){return this.getDefault("scrollToResultsOffsetHeight")}},{key:"pageChangeFocusSelector",value:function(){return this.getDefault("pageChangeFocusSelector")}},{key:"getDSL",value:function(e){var t,n,i=null;return i=null!==(t=this.config)&&void 0!==t&&null!==(n=t.internal)&&void 0!==n&&n.custom?this.config.internal.custom:this.getSimpleDSL(e),i}},{key:"getSimpleDSL",value:function(e){var t,n=this.envConfig.siteId,i=this.getSimpleDSLContentIds(),a=this.getSimpleDSLContentTypes(),o=this.getSimpleDSLContentFields(),s=this.getSimpleDSLCurrentPageFilter(),l=this.getSimpleDSLDateRange(),c=this.getSimpleDSLSort(e),d=this.getSimpleDSLExposedKeyword(e),p=this.getSimpleDSLExposedAdvancedFilters(e),f={query:{bool:{must:[],filter:[],must_not:[]}},sort:[],aggs:[]};(d&&f.query.bool.must.push(d),s&&f.query.bool.must_not.push(s),p)&&((t=f.query.bool.filter).push.apply(t,r(p.filters)),p.aggs&&(f.aggs=p.aggs));return n&&f.query.bool.filter.push({terms:{field_node_site:[n]}}),i&&f.query.bool.filter.push({terms:i}),a&&f.query.bool.filter.push({terms:a}),o.length>0&&o.forEach((function(e){f.query.bool.filter.push({terms:u({},e.fieldName,e.fieldConfig.values)})})),l.length>0&&l.forEach((function(e){f.query.bool.filter.push(e)})),c.length>0&&(f.sort=c),this.stripEmptyValues(f),f}},{key:"getSimpleDSLCurrentPageFilter",value:function(){var e,t,n,i=null,a=null===(e=this.config)||void 0===e||null===(t=e.internal)||void 0===t?void 0:t.includeCurrentPage,o=null===(n=this.envConfig)||void 0===n?void 0:n.currentPage;return!a&&o&&(i={match:{nid:o}}),i}},{key:"getSimpleDSLExposedKeyword",value:function(e){var t,n,i=null,a=null===(t=this.config)||void 0===t||null===(n=t.interface)||void 0===n?void 0:n.keyword;if("basic"===(null===a||void 0===a?void 0:a.type)){var o=this.getStateValue(e,"ExposedFilterKeywordModel");o&&(i={multi_match:{query:o,type:this.getDefault("ExposedFilterKeywordType"),fields:a.fields||this.getDefault("ExposedFilterKeywordDefaultFields")}})}return i}},{key:"getSimpleDSLExposedAdvancedFilters",value:function(e){var t,n,i,a=this,o=null,r=null===(t=this.config)||void 0===t||null===(n=t.interface)||void 0===n||null===(i=n.filters)||void 0===i?void 0:i.fields;if(r){var s=[],l=null;r.forEach((function(t){var n=t.options.model,i=e[n],o=t["elasticsearch-field"]||n,r=a.getSimpleDSLExposedAdvancedFiltersField(t,o,i);null!==r&&void 0!==r&&r.filter&&s.push(r.filter),null!==r&&void 0!==r&&r.agg&&(l||(l={}),l[n]=r.agg)})),o={filters:s,aggs:l}}return o}},{key:"getSimpleDSLExposedAdvancedFiltersField",value:function(e,t,n){var i=null;switch(e.type){case"basic":var a=null,o=null;if(Array.isArray(n)?n.length>0&&(a={terms:u({},t,n)}):n&&(a={terms:u({},t,[n])}),e["elasticsearch-aggregation"]){var r=e["elasticsearch-aggregation-order"]||this.getDefault("ExposedFilterAggregationOrder"),s=e["elasticsearch-aggregation-size"]||this.getDefault("ExposedFilterAggregationSize");o={terms:{field:t,order:{_key:r},size:s}}}i={filter:a,agg:o};break}return i}},{key:"getSimpleDSLContentIds",value:function(){var e,t=null;return null!==(e=this.config.internal)&&void 0!==e&&e.contentIds&&!this.config.internal.contentIds.some(isNaN)&&(t={nid:this.config.internal.contentIds}),t}},{key:"getSimpleDSLContentTypes",value:function(){var e,t=null;return null!==(e=this.config.internal)&&void 0!==e&&e.contentTypes&&(t={type:this.config.internal.contentTypes}),t}},{key:"getSimpleDSLContentFields",value:function(){var e,t=[];if(null!==(e=this.config.internal)&&void 0!==e&&e.contentFields)for(var n=0,i=Object.entries(this.config.internal.contentFields);n<i.length;n++){var a=o(i[n],2),r=a[0],s=a[1];t.push({fieldName:r,fieldConfig:s})}return t}},{key:"getSimpleDSLSort",value:function(e){var t=[],n=null,i=this.getStateValue(e,"ExposedControlSortModel");return n=i?this.getFieldValueFromId(i,this.getExposedSortValues()):this.getInternalSort(),n&&(t=n.map((function(e){return u({},e.field,e.direction)}))),t}},{key:"getSimpleDSLDateRange",value:function(){var e,t=[];if(null!==(e=this.config.internal)&&void 0!==e&&e.dateFilter){var n=this.config.internal.dateFilter,i=null,a=null,o=null;switch(n.criteria){case"range":i=n.dateRangeStart,a=n.dateRangeEnd||n.dateRangeStart;break;case"today":o=this.getStartEndDates("day"),i=o.start,a=o.end;break;case"this_week":o=this.getStartEndDates("week"),i=o.start,a=o.end;break;case"this_month":o=this.getStartEndDates("month"),i=o.start,a=o.end;break;default:console.log("Criteria not supported");break}i&&a&&(t.push({range:u({},n.startDateField,{gte:i})}),t.push({range:u({},n.endDateField,{lte:a})}))}return t}},{key:"getStartEndDates",value:function(e){return{start:p().startOf(e).format(),end:p().endOf(e).format()}}},{key:"getExposedFilterForm",value:function(){var e=null,t=[],n={},i=this.getExposedFilterGroups();return i.forEach((function(e){e.models&&e.models.forEach((function(t,i){n[t]=e.values[i]})),t.push(e.group)})),t.length>0&&(e={model:n,schema:{groups:t},formState:{}}),e}},{key:"getExposedFilterGroups",value:function(){var e=[this.getExposedFilterKeywordGroup(),this.getExposedFilterAdvancedFilterGroup(),this.getExposedFilterSubmissionGroup()];return e.filter((function(e){return null!==e}))}},{key:"getExposedFilterKeywordGroup",value:function(){var e,t,n=null,i=null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t?void 0:t.keyword;if(i){var a=this.getDefault("ExposedFilterKeywordModel");n={models:[a],values:[""],group:{fields:[{type:"input",inputType:"text",label:(null===i||void 0===i?void 0:i.label)||this.getDefault("ExposedFilterKeywordLabel"),placeholder:(null===i||void 0===i?void 0:i.placeholder)||this.getDefault("ExposedFilterKeywordPlaceholder"),model:a}]}}}return n}},{key:"getExposedFilterAdvancedFilterGroup",value:function(){var e,t,n,i=this,a=null,o=null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(n=t.filters)||void 0===n?void 0:n.fields;if((null===o||void 0===o?void 0:o.length)>0){var r=[],s=[],l=[];o.forEach((function(e){var t=i.getExposedFilterField(e);r.push(t.model),s.push(i.getExposedFilterFieldDefaultValue(e)),t&&l.push(t)})),a={models:r,values:s,group:{styleClasses:["app-content-collection__form-wrap"],fields:l}}}return a}},{key:"getExposedFilterFieldDefaultValue",value:function(e){var t="";return"basic"===e.type&&"rplselect"===e.options.type&&e.options.multiselect&&(t=[]),t}},{key:"getExposedFilterField",value:function(e){var t=null;switch(e.type){case"basic":var n=this.cloneObject(e.options);n.styleClasses=e.additionalClasses,t=n;break}return t}},{key:"getExposedFilterSubmissionGroup",value:function(){var e,t,n,i,a,o,r=null,s=[],l=null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(n=t.filters)||void 0===n?void 0:n.submit;"visible"===(null===l||void 0===l?void 0:l.visibility)&&s.push({type:"rplsubmitloader",buttonText:(null===l||void 0===l?void 0:l.label)||this.getDefault("ExposedFilterSubmitLabel"),loading:!1,autoUpdate:!0,styleClasses:["app-content-collection__form-inline"]});var u=null===(i=this.config)||void 0===i||null===(a=i.interface)||void 0===a||null===(o=a.filters)||void 0===o?void 0:o.clearForm;return"visible"===(null===u||void 0===u?void 0:u.visibility)&&s.push({type:"rplclearform",buttonText:(null===u||void 0===u?void 0:u.label)||this.getDefault("ExposedFilterClearFormLabel"),styleClasses:["app-content-collection__form-inline"]}),s.length>0&&(r={group:{styleClasses:["app-content-collection__form-wrap","app-content-collection__form-wrap-no-gutter"],fields:s}}),r}},{key:"getExposedFilterModelNames",value:function(){var e=[];return this.getExposedFilterGroups().forEach((function(t){t.models&&e.push.apply(e,r(t.models))})),e}},{key:"getExposedControlModelNames",value:function(){return this.getExposedControlFields().map((function(e){return e.model}))}},{key:"getExposedControlFields",value:function(){var e=[this.getExposedSortField(),this.getExposedItemsToLoadField()];return e.filter((function(e){return null!==e}))}},{key:"getExposedControlForm",value:function(){var e=null,t=[],n={},i=this.getExposedControlFields();return i.forEach((function(e){n[e.model]=e.value,t.push(e.field)})),t.length>0&&(e={model:n,schema:{groups:[{styleClasses:["app-content-collection__form-wrap"],fields:t}]},formState:{}}),e}},{key:"getExposedControlValues",value:function(e){var t=this,n=null;return e&&(n=e.values.map((function(e){return{id:t.getIdName(e.name),name:e.name,value:e.value}}))),n}},{key:"getExposedSortValues",value:function(){return this.getExposedControlValues(this.getDisplaySort())}},{key:"getExposedItemsToLoadValues",value:function(){return this.getExposedControlValues(this.getDisplayItemsToLoad())}},{key:"getExposedFieldDefaultValue",value:function(e){var t="";return e.length>0&&(t=e[0].id),t}},{key:"getExposedSortField",value:function(){var e=null,t=this.getExposedSortValues();return t&&(e={model:this.getSortModelName(),value:this.getExposedFieldDefaultValue(t),field:{type:"rplselect",model:this.getSortModelName(),label:this.getDefault("ExposedControlSortLabel"),placeholder:this.getDefault("ExposedControlSortPlaceholder"),values:t.map((function(e){var t=e.id,n=e.name;return{id:t,name:n}})),styleClasses:["app-content-collection__form-inline"]}}),e}},{key:"getExposedItemsToLoadField",value:function(){var e=null,t=this.getExposedItemsToLoadValues();return t&&(e={model:this.getItemsPerPageModelName(),value:this.getExposedFieldDefaultValue(t),field:{type:"rplselect",model:this.getItemsPerPageModelName(),label:this.getDefault("ExposedControlItemsPerPageLabel"),placeholder:this.getDefault("ExposedControlItemsPerPagePlaceholder"),values:t.map((function(e){var t=e.id,n=e.name;return{id:t,name:n}})),styleClasses:["app-content-collection__form-inline"]}}),e}},{key:"submitFormOnModelChange",value:function(e,t,n){var i,a,o,r=!1;switch(n){case"exposedFilterForm":null!==(i=this.config)&&void 0!==i&&null!==(a=i.interface)&&void 0!==a&&null!==(o=a.filters)&&void 0!==o&&o.submitOnChange&&t!==this.getDefault("ExposedFilterKeywordModel")&&(r=!0);break;case"controlForm":r=!0;break}return r}},{key:"getDefaultState",value:function(){var e={};this.getDisplayPagination()&&(e[this.getPaginationModelName()]=1),e[this.getSortModelName()]=this.getInitialSort(),e[this.getItemsPerPageModelName()]=this.getInitialItemsToLoad();var t=this.getExposedFilterGroups();return t.forEach((function(t){t.models&&t.models.forEach((function(n,i){e[n]=t.values[i]}))})),e}},{key:"getResults",value:function(){var e=a(regeneratorRuntime.mark((function e(t){var n,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=null,i=this.getSearchRequest(t),e.next=4,this.searchClient(i);case 4:return a=e.sent,a&&(n={hits:a.hits.hits.map(this.mapResult.bind(this)),total:a.hits.total,aggregations:a.aggregations}),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"mapResult",value:function(e){var t,n,i,a,o,r,s,l,u=null,c=e._source,d=this.getLocalisedLinkFromSource(c);switch(this.getDisplayResultComponentType()){case"search-result":u={title:null===(t=c.title)||void 0===t?void 0:t[0],link:d?{linkText:d.domain+d.path,linkUrl:d.path}:null,date:null===(n=c.created)||void 0===n?void 0:n[0],description:null===(i=c.field_landing_page_summary)||void 0===i?void 0:i[0]};break;case"card":default:var p=null===(a=this.getDisplayResultComponent())||void 0===a?void 0:a.style;u={title:null===(o=c.title)||void 0===o?void 0:o[0],link:d?{text:d.path,url:d.path}:null,dateStart:null===(r=c.created)||void 0===r?void 0:r[0],summary:null===(s=c.field_landing_page_summary)||void 0===s?void 0:s[0],image:null===(l=c.field_media_image_absolute_path)||void 0===l?void 0:l[0],displayStyle:p||this.getDefault("DisplayResultComponentCardStyle")};break}return u}},{key:"updateFiltersFromAggregation",value:function(e,t,n,i){var a=this;Object.keys(e).forEach((function(o){t.schema.groups.forEach((function(t){t.fields.forEach((function(t){if(t.model===o){var r=a.getAggregatedFilterValues(e[o].buckets,n[o]);t.values=r;var s=0===r.length;i(t,s)}}))}))}))}},{key:"getAggregatedFilterValues",value:function(e,t){var n=[];return e.length>0?n=e.map((function(e){var t=e.key,n=e.doc_count;return{id:t,name:"".concat(t," (").concat(n,")")}})):t&&Array.isArray(t)&&(n=t.map((function(e){return{id:e,name:"".concat(e," (0)")}}))),n}},{key:"getSearchRequest",value:function(e){return i({from:this.getStartingItem(e),size:this.getItemsToLoad(e),_source:[]},this.getDSL(e))}},{key:"getInitialControlValue",value:function(e,t,n){var i=e;if(t){var a=this.getExposedFieldDefaultValue(n);a&&(i=a)}return i}},{key:"getInitialSort",value:function(){var e=this.getInternalSort();return this.getInitialControlValue(e,this.getDisplaySort(),this.getExposedSortValues())}},{key:"getInitialItemsToLoad",value:function(){var e=this.getInternalItemsToLoad()||this.getDefault("ItemsToLoad");return this.getInitialControlValue(e,this.getDisplayItemsToLoad(),this.getExposedItemsToLoadValues())}},{key:"getFieldValueFromId",value:function(e,t){var n=null;if(t)for(var i=0;i<t.length;i++)if(t[i].id===e){n=t[i].value;break}return n}},{key:"getItemsToLoad",value:function(e){var t=this.getInitialItemsToLoad(),n=this.getStateValue(e,"ExposedControlItemsPerPageModel");if(n){var i=this.getFieldValueFromId(n,this.getExposedItemsToLoadValues());i&&(t=i)}return t}},{key:"getStartingItem",value:function(e){var t=0,n=e[this.getPaginationModelName()];return n&&(t=(n-1)*this.getItemsToLoad(e)),t}},{key:"getResultCountRange",value:function(e,t){var n=!1;if(t&&t>0){var i=e[this.getPaginationModelName()]||1,a=this.getItemsToLoad(e),o=i<2?1:a*(i-1)+1,r=a*i,s=r>t?t:r;n="".concat(o,"-").concat(s)}return n}},{key:"getProcessedResultsCount",value:function(e,t){var n=null;if(t>0&&(n=this.getDisplayResultCountText(),n)){var i=this.getResultCountRange(e,t);n=n.replace("{range}",i),n=n.replace("{count}",t)}return n}},{key:"getPaginationTotalSteps",value:function(e,t){return Math.ceil(parseInt(t)/this.getItemsToLoad(e))}}]),e}()},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("ac1f"),n("841c");var i=n("a026"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],r=n("2877"),s={},l=Object(r["a"])(s,a,o,!1,null,null,null),u=l.exports,c=(n("3328"),n("1872")),d=n("8c4f"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"controls"},[n("div",{staticClass:"controls__inner"},[n("div",{staticClass:"controls__left"},[n("label",[n("span",[e._v("Elasticsearch config:")]),n("prism-editor",{staticClass:"code-editor",attrs:{highlight:e.highlighter,"line-numbers":""},model:{value:e.customES,callback:function(t){e.customES=t},expression:"customES"}})],1),n("label",[n("span",[e._v("Environment config:")]),n("prism-editor",{staticClass:"code-editor",attrs:{highlight:e.highlighter,"line-numbers":""},model:{value:e.customEnvironment,callback:function(t){e.customEnvironment=t},expression:"customEnvironment"}})],1)]),n("div",{staticClass:"controls__right"},[n("label",[n("span",[e._v("Schema config:")]),n("prism-editor",{staticClass:"code-editor",attrs:{highlight:e.highlighter,"line-numbers":""},model:{value:e.customSchema,callback:function(t){e.customSchema=t},expression:"customSchema"}})],1)])]),n("button",{on:{click:e.updateSchema}},[e._v("Apply configuration")]),n("button",{staticClass:"controls__show-schema",class:{"controls__show-schema--expanded":e.viewSchema},on:{click:function(t){e.viewSchema=!e.viewSchema}}},[e._v(e._s(e.viewSchema?"hide":"show")+" reference schema")]),e.viewSchema?n("div",[n("label",[n("span",[e._v("Reference:")]),n("prism-editor",{staticClass:"code-editor",attrs:{highlight:e.highlighter,"line-numbers":"",readonly:!0},model:{value:e.validationSchema,callback:function(t){e.validationSchema=t},expression:"validationSchema"}})],1)]):e._e()]),n("div",{staticClass:"display"},[e.schema?n("content-collection",{key:e.count,attrs:{schema:e.schema,environment:e.environment}}):e._e()],1)])},f=[],h=(n("a15b"),n("d81d"),n("b64b"),n("99af"),n("e57a")),g=(n("cabf"),n("8c7a")),m=(n("cb55"),n("f393"),n("6b2c"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-content-collection"},[n("div",{staticClass:"app-content-collection__header"},[n("div",{staticClass:"app-content-collection__header-left"},[e.title?n("h2",{staticClass:"app-content-collection__heading"},[e._v(e._s(e.title))]):e._e(),e.description?n("p",[e._v(e._s(e.description))]):e._e(),n("div",{staticClass:"app-content-collection__skip-link rpl-skip-link "},[e.showSkipToResultLink?n("a",{staticClass:"app-content-collection__skip-link__link rpl-skip-link__link",attrs:{href:e.getSkipToResultLinkAnchor}},[e._v("Skip to results")]):e._e()])]),n("div",{staticClass:"app-content-collection__header-right"},[e.cta?n("rpl-link",{attrs:{href:e.cta.url}},[e._v(e._s(e.cta.text))]):e._e()],1)]),e.exposedFilterFormData?n("rpl-form",{attrs:{formData:e.exposedFilterFormData,submitHandler:e.exposedFilterFormSubmit,fieldChangeHandler:e.exposedFilterFormChange,scrollToMessage:!1,validateOnSubmit:!1,submitFormOnClear:!0}}):e._e(),e.exposedFilterFormData?n("rpl-divider"):e._e(),e.showSkipToResultLink?n("div",{attrs:{id:e.getSkipToResultLinkID}}):e._e(),n("rpl-search-results-layout",{ref:"search-results",attrs:{searchResults:e.results,error:e.error,noResultsMsg:e.noResultsText,loading:e.resultsLoading},scopedSlots:e._u([e.resultCount?{key:"count",fn:function(){return[e._v(e._s(e.resultCount))]},proxy:!0}:null,{key:"sort",fn:function(){return[e.exposedControlFormData?n("rpl-form",{attrs:{formData:e.exposedControlFormData,submitHandler:e.exposedControlsFormSubmit,fieldChangeHandler:e.exposedControlFormChange,scrollToMessage:!1,validateOnSubmit:!1,listenForClearForm:!1}}):e._e()]},proxy:!0},{key:"loading",fn:function(){return[e._v(e._s(e.loadingText))]},proxy:!0},{key:"results",fn:function(t){return[e._t("results",(function(){return e._l(t.searchResults,(function(t,i){return n("rpl-col",{key:i+"-result",attrs:{colsBp:e.resultColumns}},[n(e.resultComponentName,e._b({tag:"component",staticClass:"app-content-collection__search-result"},"component",t,!1))],1)}))}),{searchResults:t.searchResults})]}},{key:"pagination",fn:function(){return[n("rpl-col",{attrs:{cols:"full",colsBp:e.paginationColumns}},[e.showPagination?n("rpl-pagination",e._b({on:{change:e.paginationChange}},"rpl-pagination",e.paginationData,!1)):e._e()],1)]},proxy:!0}],null,!0)}),e.isInteractive?n("div",{staticClass:"rpl-visually-hidden",attrs:{"aria-live":"polite"}},[e._v(e._s(e.announcerText))]):e._e()],1)}),v=[],y=n("1da1"),b=(n("5319"),n("96cf"),n("39a6")),S=n("6e67"),k=n("983e"),C=n("8b92"),x=n("ade3"),_=n("d4ec"),j=n("bee2"),F=n("45eb"),E=n("7e84"),D=n("262e"),T=n("2caf"),R=(n("159b"),n("4e7f")),w=n.n(R),L=n("5a0c"),O=function(e){Object(D["a"])(n,e);var t=Object(T["a"])(n);function n(){return Object(_["a"])(this,n),t.apply(this,arguments)}return Object(j["a"])(n,[{key:"getDisplayResultComponentName",value:function(){var e=null;switch(this.getDisplayResultComponentType()){case"vh-search-result":e="vh-search-result";break;default:e=Object(F["a"])(Object(E["a"])(n.prototype),"getDisplayResultComponentName",this).call(this);break}return e}},{key:"mapResult",value:function(e){var t=null,i=e._source,a=this.getLocalisedLink(i.url).path;switch(this.getDisplayResultComponentType()){case"vh-search-result":t=this.vhSearchResultMapping(e,a);break;default:t=Object(F["a"])(Object(E["a"])(n.prototype),"mapResult",this).call(this,e);break}return t}},{key:"vhSearchResultMapping",value:function(e,t){var n,i,a,o=null===(n=this.config.interface)||void 0===n||null===(i=n.display)||void 0===i||null===(a=i.resultComponent)||void 0===a?void 0:a.options;return{icon:o.icon?this.getVhSearchResultValue(o.icon,e):null,title:o.title?this.getVhSearchResultValue(o.title,e):null,link:{linkText:t,linkUrl:t},subTop:o.subTop?this.getVhSearchResultValue(o.subTop,e):null,summary:o.summary?this.getVhSearchResultValue(o.summary,e):null,subBottom:o.subBottom?this.getVhSearchResultValue(o.subBottom,e):null}}},{key:"getVhSearchResultValue",value:function(e,t){var n,i,a,o,r=this,s=null;switch(e.type){case"icon":s=e.symbol;break;case"text":s=null===(n=t._source)||void 0===n||null===(i=n[e.field])||void 0===i?void 0:i[0];break;case"date":s=L(null===(a=t._source)||void 0===a||null===(o=a[e.field])||void 0===o?void 0:o[0]).format(e.format);break;case"formatted":var l=e.format;e.fields.forEach((function(e){var n=e.field,i=r.getVhSearchResultValue(e,t);l=l.replace("{".concat(n,"}"),i||"")})),s=l;break}return s}},{key:"getExposedFilterField",value:function(e){var t=null;switch(e.type){case"a-z":var i=this.cloneObject(e.options);i.type=i.type||"rploptionbutton",i.label=i.label||"Starting Letter",i.styleClasses=e.additionalClasses||"app-content-collection__form-col-full",t=i;break;default:t=Object(F["a"])(Object(E["a"])(n.prototype),"getExposedFilterField",this).call(this,e);break}return t}},{key:"getSimpleDSLExposedAdvancedFiltersField",value:function(e,t,i){var a=null;switch(e.type){case"a-z":i&&(a={filter:{prefix:Object(x["a"])({},t,i.toLowerCase())}});break;default:a=Object(F["a"])(Object(E["a"])(n.prototype),"getSimpleDSLExposedAdvancedFiltersField",this).call(this,e,t,i);break}return a}}]),n}(w.a),P=n("e0a2"),A=n("f031"),I=n("0d41"),M={name:"AppContentCollection",mixins:[C["a"]],components:{RplLink:b["a"],RplForm:S["a"],RplCol:k["a"],RplDivider:c["b"],RplSearchResultsLayout:A["b"],RplSearchResult:A["a"],RplCardPromo:I["RplCardPromo"],RplPagination:P["a"]},props:{schema:Object,environment:Object,preloadSearchResponse:Object,sidebar:{type:Boolean,default:!1}},data:function(){var e=this.searchEndpoint.bind(this),t=new O(this.schema,e,this.environment);return{dataManager:t,defaultState:t.getDefaultState(),state:t.getDefaultState(),results:[],resultTotal:null,resultCount:null,resultsLoading:!1,error:null,announcerText:"",scrollOnNextLoad:!1,scrollOnPaginationChange:!1,scrollOffset:t.getScrollToResultsOffsetHeight(),pageChangeFocusSelector:t.pageChangeFocusSelector(),exposedFilterFormData:t.getExposedFilterForm(),exposedControlFormData:t.getExposedControlForm(),exposedControlModels:t.getExposedControlModelNames(),exposedFilterModels:t.getExposedFilterModelNames(),paginationData:t.getDisplayPaginationData(),useRouter:t.getKeepState()}},computed:{title:function(){return this.dataManager.getTitle()},description:function(){return this.dataManager.getDescription()},cta:function(){return this.dataManager.getCTA()},loadingText:function(){return this.dataManager.getDisplayLoadingText()},noResultsText:function(){return this.dataManager.getDisplayNoResultsText()},errorText:function(){return this.dataManager.getDisplayErrorText()},resultComponentName:function(){return this.dataManager.getDisplayResultComponentName()},resultColumns:function(){return this.dataManager.getDisplayResultComponentColumns()},paginationColumns:function(){return this.dataManager.getDisplayPaginationComponentColumns()},showPagination:function(){return this.paginationData&&this.paginationData.totalSteps>1},paginationModelName:function(){return this.dataManager.getPaginationModelName()},isInteractive:function(){return!!this.exposedFilterFormData||!!this.exposedControlFormData||!!this.paginationData},showSkipToResultLink:function(){return this.dataManager.getSkipToResultLink()},getSkipToResultLinkID:function(){return this.dataManager.getSkipToResultLinkID()},getSkipToResultLinkAnchor:function(){return"#"+this.dataManager.getSkipToResultLinkID()}},methods:{searchEndpoint:function(e){return this.$tideSearchApi.searchByPost(e)},getResults:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.resultsLoading=!0,e.announcerText="",t.next=4,e.dataManager.getResults(e.state);case 4:n=t.sent,n?(e.error=null,e.updateInterfaceFromSearchResponse(n),e.announcerText=n.total>0?e.resultCount:e.noResultsText):(e.error={message:e.errorText},e.announcerText=e.errorText),e.resultsLoading=!1,e.scrollOnNextLoad&&(e.scrollOnNextLoad=!1,e.moveToTopOfResults());case 8:case"end":return t.stop()}}),t)})))()},moveToTopOfResults:function(){var e=this;if(this.scrollOnPaginationChange){var t,n=null===(t=this.$refs["search-results"])||void 0===t?void 0:t.$el;n&&this.$nextTick((function(){if(window.scrollTo({top:n.offsetTop-e.scrollOffset}),e.pageChangeFocusSelector){var t=n.querySelector(e.pageChangeFocusSelector);t&&t.focus()}}))}},updateInterfaceFromSearchResponse:function(e){this.results=e.hits,this.resultCount=this.dataManager.getProcessedResultsCount(this.state,e.total),this.exposedFilterFormData&&e.aggregations&&this.dataManager.updateFiltersFromAggregation(e.aggregations,this.exposedFilterFormData,this.state,(function(e,t){i["default"].set(e,"disabled",t)})),this.paginationData&&(this.paginationData.totalSteps=this.dataManager.getPaginationTotalSteps(this.state,e.total))},syncTo:function(e,t,n){return this.dataManager.syncObject(e,t,n)},resetPagination:function(){this.state[this.paginationModelName]=1},setPaginationFromState:function(){this.paginationData&&(this.paginationData.initialStep=parseInt(this.state[this.paginationModelName]))},paginationChange:function(e){this.scrollOnNextLoad=!0,this.syncTo({page:e},this.state),this.updateQuery()},exposedFilterFormSubmit:function(){this.syncTo(this.exposedFilterFormData.model,this.state),this.resetPagination(),this.updateQuery()},exposedControlsFormSubmit:function(){this.syncTo(this.exposedControlFormData.model,this.state),this.resetPagination(),this.updateQuery()},exposedFilterFormChange:function(e,t){this.dataManager.submitFormOnModelChange(e,t,"exposedFilterForm")&&this.exposedFilterFormSubmit()},exposedControlFormChange:function(e,t){this.dataManager.submitFormOnModelChange(e,t,"controlForm")&&this.exposedControlsFormSubmit()},updateQuery:function(){var e=this.dataManager.getDiffObject(this.state,this.defaultState);this.useRouter?this.$router.replace({query:e}):(this.syncQueryState(e),this.getResults())},syncQueryState:function(e){this.syncTo(this.dataManager.getTypeCorrectedQuery(e,this.defaultState),this.state),this.exposedFilterFormData&&this.syncTo(this.state,this.exposedFilterFormData.model,this.exposedFilterModels),this.exposedControlFormData&&this.syncTo(this.state,this.exposedControlFormData.model,this.exposedControlModels),this.setPaginationFromState()},initializeScrollOnPageChange:function(){this.scrollOnPaginationChange=this.dataManager.getScrollToResults()}},watch:{$route:function(e,t){this.syncQueryState(e.query),this.getResults()}},created:function(){this.useRouter&&this.syncQueryState(this.$route.query),this.preloadSearchResponse&&(this.updateInterfaceFromSearchResponse(this.preloadSearchResponse),this.initializeScrollOnPageChange())},mounted:function(){this.preloadSearchResponse||this.getResults().then(this.initializeScrollOnPageChange.bind(this))}},N=M,V=(n("0aff"),Object(r["a"])(N,m,v,!1,null,null,null)),q=V.exports,z=n("79e7"),H=n("9940"),U=n("2ec7"),$=n("93ad"),K=n("783b"),B=new K({allErrors:!0}),J={name:"App",components:{PrismEditor:h["a"],ContentCollection:q},data:function(){return{customES:JSON.stringify(U,null,2),customEnvironment:JSON.stringify(H,null,2),customSchema:JSON.stringify(z,null,2),validationSchema:JSON.stringify($,null,2),environment:null,schema:null,count:0,viewSchema:!1}},methods:{updateSchema:function(){var e=JSON.parse(this.customES);e&&this.$tideSearchApi.setParams(e);var t=JSON.parse(this.customEnvironment);t&&(this.environment=t);try{var n=JSON.parse(this.customSchema),i=B.compile($),a=i(n);a?(this.schema=n,this.count++):this.printError(i.errors)}catch(o){alert(o)}},highlighter:function(e){return Object(g["highlight"])(e,g["languages"].json)},printError:function(e){console.log(e);var t=e.map((function(e){var t=e.instancePath||"root",n=e.schemaPath,i=e.message,a=Object.keys(e.params).map((function(t){return"".concat(t,": ").concat(e.params[t])}));return"".concat(t," -> ").concat(n,":\n\t").concat(i,"\n\t\t").concat(a)})).join("\n");alert(t)}},mounted:function(){this.updateSchema()}},Q=J,G=(n("21bb"),Object(r["a"])(Q,p,f,!1,null,null,null)),Y=G.exports,Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("content-collection",{attrs:{schema:e.schema,environment:e.environment}})],1)},W=[],X={name:"App",components:{ContentCollection:q},data:function(){return{environment:{siteId:"4",primarySiteId:"4",domains:{4:""}},schema:{title:"Health Alerts",description:"Aliqua commodo mollit enim nulla minim sit ut ullamco ea dolore non consectetur eu laborum. ",callToAction:{text:"View all",url:"/search"},internal:{itemsToLoad:20,contentTypes:["health_alert"],sort:[{field:"created",direction:"desc"}]},interface:{keyword:{type:"basic",label:"Search by keyword",placeholder:"Enter keyword(s)"},filters:{submit:{visibility:"visible",label:"Apply change"},clearForm:{visibility:"visible",label:"Clear search"},fields:[{type:"basic",options:{model:"field_health_status",type:"rplselect",label:"Health alert status",placeholder:"Select an alert status",values:[{id:"active",name:"Active"},{id:"resolved",name:"Resolved"}]},additionalClasses:["app-content-collection__form-col-3"],"elasticsearch-field":"type","elasticsearch-aggregation":!1},{type:"basic",options:{model:"field_health_type",type:"rplselect",label:"Health alert type",placeholder:"Select an alert type",values:[{id:"health-alerts",name:"Alert"},{id:"health-advisories",name:"Advisory"}]},additionalClasses:["app-content-collection__form-col-3"],"elasticsearch-field":"field_health_type","elasticsearch-aggregation":!1}]},display:{type:"grid",options:{resultsCountText:"Displaying {range} of {count} results",loadingText:"Loading",noResultsText:"Sorry! We couldn't find any matches",errorText:"Search isn't working right now, please try again later.",sort:{type:"field",values:[{name:"Relevance",value:null},{name:"Title A-Z",value:[{field:"title.keyword",direction:"asc"}]},{name:"Title Z-A",value:[{field:"title.keyword",direction:"desc"}]},{name:"Newest",value:[{field:"created",direction:"desc"}]},{name:"Oldest",value:[{field:"created",direction:"asc"}]}]},itemsToLoad:{type:"field",values:[{name:"1",value:1},{name:"2",value:2},{name:"5",value:5},{name:"10",value:10},{name:"20",value:20},{name:"50",value:50},{name:"All",value:9999}]},pagination:{type:"numbers"}},resultComponent:{type:"vh-search-result",options:{title:{type:"text",field:"title"},summary:{type:"formatted",fields:[{type:"date",field:"changed",format:"DD MMM YYYY"},{type:"text",field:"field_health_type"},{type:"date",field:"created",format:"DD MMMM YYYY"}],format:"{changed} - Update to <code>{field_health_type}</code> issued {created}"},subBottom:{type:"formatted",fields:[{type:"text",field:"field_health_status"},{type:"text",field:"field_health_type"},{type:"text",field:"field_health_alert_number"}],format:"{field_health_status} | {field_health_type} {field_health_alert_number}"}}}}}}}}},ee=X,te=Object(r["a"])(ee,Z,W,!1,null,null,null),ne=te.exports;i["default"].use(d["a"]);var ie=[{path:"/",name:"Home",component:Y},{path:"/health-alerts",name:"Health alerts",component:ne}],ae=new d["a"]({routes:ie}),oe=ae,re=n("6760"),se=n.n(re),le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vh-search-result"},[n("div",{staticClass:"vh-search-result__title-bar"},[e.icon?n("rpl-icon",{staticClass:"vh-search-result__title-icon",attrs:{symbol:e.icon,color:"primary"}}):e._e(),e.title?n("rpl-link",{staticClass:"vh-search-result__link",attrs:{href:e.link.linkUrl}},[n("h2",{staticClass:"vh-search-result__heading"},[e._v(e._s(e.title))])]):e._e()],1),e.subTop?n("div",{staticClass:"vh-search-result__sub-top"},[e._v(e._s(e.subTop))]):e._e(),e.summary?n("div",{staticClass:"vh-search-result__summary",domProps:{innerHTML:e._s(e.summary)}}):e._e(),e.subBottom?n("div",{staticClass:"vh-search-result__sub-bottom"},[e._v(e._s(e.subBottom))]):e._e()])},ue=[],ce=n("2470"),de={name:"VhSearchResult",props:{icon:String,title:String,link:Object,subTop:String,summary:String,subBottom:String},components:{RplLink:b["e"],RplIcon:ce["a"]}},pe=de,fe=(n("6590"),Object(r["a"])(pe,le,ue,!1,null,null,null)),he=fe.exports;i["default"].config.productionTip=!1,i["default"].use(c["c"],{}),i["default"].component("vh-search-result",he);var ge={searchByPost:function(e){return se.a.search(e)},setParams:function(e){se.a.setESParams(e)}};i["default"].mixin({beforeCreate:function(){var e=this.$options;e.tideSearchApi?this.$tideSearchApi=e.tideSearchApi:e.parent&&e.parent.$tideSearchApi&&(this.$tideSearchApi=e.parent.$tideSearchApi)}}),new i["default"]({router:oe,tideSearchApi:ge,render:function(e){return e(u)}}).$mount("#app")},6590:function(e,t,n){"use strict";n("3318")},6760:function(e,t,n){var i=n("c973").default;n("96cf"),n("99af"),n("4e82"),n("ac1f"),n("841c");var a=n("f94d"),o="",r="",s="",l="",u="";e.exports={setESParams:function(e){o=e.SEARCH_URL,r=e.SEARCH_AUTH_USERNAME,s=e.SEARCH_AUTH_PASSWORD,l=e.SEARCH_INDEX,u=e.SEARCH_HASH},search:function(e){return i(regeneratorRuntime.mark((function t(){var n,i,c,d,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="https://"+u+"."+o,i={host:n,apiVersion:"7.6",httpAuth:"".concat(r,":").concat(s)},c=new a.Client(i),t.prev=3,d={},d.index=void 0===e.index?l:e.index,d.from=e.from,d.size=e.size,d._source=e._source,d.body={query:e.query,sort:e.sort,aggs:e.aggs},t.next=12,c.search(d);case 12:return p=t.sent,t.abrupt("return",p);case 16:return t.prev=16,t.t0=t["catch"](3),console.trace(t.t0.message),t.abrupt("return",null);case 20:case"end":return t.stop()}}),t,null,[[3,16]])})))()}}},"79e7":function(e){e.exports=JSON.parse('{"title":"Content Collection","interface":{"keepState":true,"skipToResultLink":true,"keyword":{"type":"basic","label":"Search by keyword","placeholder":"Enter keyword(s)"},"filters":{"submit":{"visibility":"visible","label":"Apply change"},"clearForm":{"visibility":"visible","label":"Clear search"},"fields":[{"type":"basic","options":{"model":"type","type":"rplselect","label":"Type","hint":"The content type to filter by","placeholder":"Select type","values":[{"id":"landing_page","name":"Landing Page"},{"id":"news","name":"News"}]},"additionalClasses":["app-content-collection__form-col-3"],"elasticsearch-field":"type","elasticsearch-aggregation":false},{"type":"basic","options":{"model":"field_tags_name","type":"rplselect","multiselect":true,"label":"Tags","placeholder":"Select some tags","values":[]},"additionalClasses":["app-content-collection__form-col-3"],"elasticsearch-field":"field_tags_name","elasticsearch-aggregation":true},{"type":"basic","options":{"model":"field_topic_name","type":"rplselect","multiselect":true,"label":"Topic","placeholder":"Select a topic","values":[]},"additionalClasses":["app-content-collection__form-col-3"],"elasticsearch-field":"field_topic_name","elasticsearch-aggregation":true}]},"display":{"type":"grid","options":{"resultsCountText":"Displaying {range} of {count} results","loadingText":"Loading","noResultsText":"Sorry! We couldn\'t find any matches","errorText":"Search isn\'t working right now, please try again later.","sort":{"type":"field","values":[{"name":"Relevance","value":null},{"name":"Title A-Z","value":[{"field":"title.keyword","direction":"asc"}]},{"name":"Title Z-A","value":[{"field":"title.keyword","direction":"desc"}]},{"name":"Newest","value":[{"field":"created","direction":"desc"}]},{"name":"Oldest","value":[{"field":"created","direction":"asc"}]}]},"itemsToLoad":{"type":"field","values":[{"name":"12","value":12},{"name":"24","value":24}]},"pagination":{"type":"numbers"}},"resultComponent":{"type":"card"}}}}')},"858a":function(e,t,n){},"93ad":function(e){e.exports=JSON.parse('{"type":"object","description":"Schema for the Content Collection","properties":{"title":{"type":"string","description":"Title displayed above results"},"description":{"type":"string","description":"Description displayed above the results"},"callToAction":{"type":"object","description":"A link to another page.","properties":{"text":{"type":"string","description":"Display text of the link"},"url":{"type":"string","description":"A relative or absolute URL."}},"additionalProperties":false},"connection":{"type":"object","description":"Configuration of the search endpoint.","properties":{"type":{"type":"string","description":"The type of search endpoint to query. Defaults to elastic-search."},"index":{"type":"string","description":"Used by Tide to store the machine name of the index to query."},"serverIndex":{"type":"string","description":"Used by Nuxt-tide Search API to query a particular index."}},"additionalProperties":false},"internal":{"type":"object","description":"Contains the rules for generating the search query.","oneOf":[{"properties":{"contentIds":{"type":"array","description":"Array of node ids for content","items":{"type":"number"}},"contentTypes":{"type":"array","description":"Array of content types","items":{"type":"string"}},"contentFields":{"type":"object","description":"Fields to filter the content against.","patternProperties":{"^[a-z0-9]+$":{"type":"object","properties":{"operator":{"type":"string","enum":["AND","OR"]},"values":{"type":"array","items":{"type":"number"}}},"additionalProperties":false}}},"includeCurrentPage":{"type":"boolean","description":"For excluding the page that this component is being rendered upon."},"excludeIds":{"type":"array","description":"Array of node ids for excluding from content","items":{"type":"number"}},"dateFilter":{"type":"object","properties":{"criteria":{"type":"string","description":"","enum":["today","this_week","this_month","this_year","today_and_future","past","range"]},"startDateField":{"type":"string","description":""},"endDateField":{"type":"string","description":""},"dateRangeStart":{"type":"string","description":"Start and end dates to test against. Formatted as ISO 8601","pattern":"\\\\d{4}-[01]\\\\d-[0-3]\\\\dT[0-2]\\\\d:[0-5]\\\\d:[0-5]\\\\d([+-][0-2]\\\\d:[0-5]\\\\d|Z)"},"dateRangeEnd":{"type":"string","description":"Start and end dates to test against. Formatted as ISO 8601","pattern":"\\\\d{4}-[01]\\\\d-[0-3]\\\\dT[0-2]\\\\d:[0-5]\\\\d:[0-5]\\\\d([+-][0-2]\\\\d:[0-5]\\\\d|Z)"}},"additionalProperties":false},"sort":{"type":"array","items":{"type":"object","properties":{"field":{"type":"string"},"direction":{"type":"string","enum":["desc","asc"]}}}},"itemsToLoad":{"type":"number","minimum":1}},"additionalProperties":false},{"properties":{"custom":{"type":"object","description":"Pure Elasticsearch DSL Query"}},"additionalProperties":false}]},"interface":{"type":"object","description":"User options for filtering by keywords.","properties":{"keepState":{"type":"boolean","description":"Store the state of the user interactions in the URL. Only one Content Collection can use this per page."},"skipToResultLink":{"type":"boolean","description":"Show skip to result link when accessing using a tab key, default is true."},"keyword":{"type":"object","properties":{"type":{"type":"string"},"label":{"type":"string"},"placeholder":{"type":"string"},"fields":{"type":"array","items":{"type":"string"}}}},"filters":{"type":"object","properties":{"expandSearchFilters":{"type":"boolean"},"submitOnChange":{"type":"boolean"},"label":{"type":"string"},"submit":{"type":"object","properties":{"visibility":{"type":"string","enum":["visible","hidden","when-needed"]},"label":{"type":"string"}}},"clearForm":{"type":"object","properties":{"visibility":{"type":"string","enum":["visible","hidden","when-needed"]},"label":{"type":"string"}}},"defaultStyling":{"type":"boolean"},"fields":{"type":"array","items":{"type":"object","properties":{"type":{"type":"string"},"options":{"type":"object","properties":{"model":{"type":"string","description":"The URL query key for this field, and a fallback if elasticsearch-field is undefined."}},"required":["model"]},"additionalClasses":{"type":"array","items":{"type":"string"}},"elasticsearch-field":{"type":"string"},"elasticsearch-aggregation":{"type":"boolean","description":"Determine if field should be added to aggregation."},"elasticsearch-aggregation-order":{"type":"string","description":"The order (asc / desc) for aggregation results."},"elasticsearch-aggregation-size":{"type":"number","description":"The number of aggregated results to return."}},"additionalProperties":false,"required":["type","options"]}}},"additionalProperties":false},"display":{"type":"object","properties":{"type":{"type":"string"},"options":{"type":"object","properties":{"resultsCountText":{"type":"string"},"loadingText":{"type":"string"},"noResultsText":{"type":"string"},"errorText":{"type":"string"},"sort":{"type":"object","properties":{"type":{"type":"string"},"values":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"value":{"type":["array","null"],"description":"The sort value or values to apply."}}}}},"required":["type"]},"itemsToLoad":{"type":"object","properties":{"type":{"type":"string"},"values":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"value":{"type":["number","null"]}}}}},"required":["type"]},"pagination":{"type":"object","properties":{"type":{"type":"string"}},"required":["type"]}}},"resultComponent":{"type":"object","properties":{"type":{"type":"string"}},"required":["type"]}},"required":["type"]}},"additionalProperties":false}},"additionalProperties":false}')},9940:function(e){e.exports=JSON.parse('{"siteId":"4","domains":{"4":"www.vic.gov.au"},"currentPage":"","sidebar":false,"skipToResultLinkID":"go-here-please"}')}});