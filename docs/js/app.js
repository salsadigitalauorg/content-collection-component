(function(e){function t(t){for(var n,a,s=t[0],l=t[1],u=t[2],c=0,d=[];c<s.length;c++)a=s[c],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);p&&p(t);while(d.length)d.shift()();return r.push.apply(r,u||[]),i()}function i(){for(var e,t=0;t<r.length;t++){for(var i=r[t],n=!0,a=1;a<i.length;a++){var s=i[a];0!==o[s]&&(n=!1)}n&&(r.splice(t--,1),e=l(l.s=i[0]))}return e}var n={},a={app:0},o={app:0},r=[];function s(e){return l.p+"js/"+({"rpl-card-promotion":"rpl-card-promotion"}[e]||e)+".js"}function l(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,l),i.l=!0,i.exports}l.e=function(e){var t=[],i={"rpl-card-promotion":1};a[e]?t.push(a[e]):0!==a[e]&&i[e]&&t.push(a[e]=new Promise((function(t,i){for(var n="css/"+({"rpl-card-promotion":"rpl-card-promotion"}[e]||e)+".css",o=l.p+n,r=document.getElementsByTagName("link"),s=0;s<r.length;s++){var u=r[s],c=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(c===n||c===o))return t()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){u=d[s],c=u.getAttribute("data-href");if(c===n||c===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var n=t&&t.target&&t.target.src||o,r=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=n,delete a[e],p.parentNode.removeChild(p),i(r)},p.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){a[e]=0})));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,i){n=o[e]=[t,i]}));t.push(n[2]=r);var u,c=document.createElement("script");c.charset="utf-8",c.timeout=120,l.nc&&c.setAttribute("nonce",l.nc),c.src=s(e);var d=new Error;u=function(t){c.onerror=c.onload=null,clearTimeout(p);var i=o[e];if(0!==i){if(i){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",d.name="ChunkLoadError",d.type=n,d.request=a,i[1](d)}o[e]=void 0}};var p=setTimeout((function(){u({type:"timeout",target:c})}),12e4);c.onerror=c.onload=u,document.head.appendChild(c)}return Promise.all(t)},l.m=e,l.c=n,l.d=function(e,t,i){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(i,n,function(t){return e[t]}.bind(null,n));return i},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/content-collection-component/",l.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var p=c;r.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"0aff":function(e,t,i){"use strict";i("858a")},1:function(e,t){},2:function(e,t){},"21bb":function(e,t,i){"use strict";i("2dad")},"26f1":function(e,t){e.exports={wide:{m:6,l:4,xxxl:3},narrow:{m:6,xxxl:4}}},"2dad":function(e,t,i){},"2ec7":function(e){e.exports=JSON.parse('{"SEARCH_URL":"sdp1-b.elastic.sdp.vic.gov.au","SEARCH_AUTH_USERNAME":"","SEARCH_AUTH_PASSWORD":"","SEARCH_INDEX":"elasticsearch_index_drupal_node","SEARCH_HASH":"a83890f7a31dea14e1ae83c6f0afacca"}')},3:function(e,t){},3318:function(e,t,i){},4678:function(e,t,i){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6b","./en-gb.js":"39a6b","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(e){var t=o(e);return i(t)}function o(e){if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=o,e.exports=a,a.id="4678"},"4e7f":function(e,t,i){var n=i("ded3").default,a=i("c973").default,o=i("278c").default,r=i("448a").default,s=i("7037").default,l=i("6374").default,u=i("9523").default,c=i("970b").default,d=i("5bc3").default;i("96cf"),i("159b"),i("b64b"),i("d3b7"),i("25f0"),i("a4d3"),i("e01a"),i("4e82"),i("4de4"),i("ddb0"),i("4fad"),i("d81d"),i("b0c0"),i("99af"),i("ac1f"),i("5319");var p=i("5a0c"),f=i("26f1");e.exports=function(){"use strict";function e(t,i,n){if(c(this,e),this.config=t,this.searchClient=i,this.envConfig=n,this.defaults={EnvironmentSiteId:"4",ResultItemFieldNameUrl:"url",ResultItemFieldNamePrimarySite:"field_node_primary_site",SkipToResultLink:!0,SkipToResultLinkLabel:"Skip to results",ExposedFilterKeywordLabel:"Search by keyword",ExposedFilterKeywordPlaceholder:"Enter keywords",ExposedFilterSubmitLabel:"Filter results",ExposedFilterClearFormLabel:"Clear search filters",ExposedControlSortModel:"sort",ExposedControlSortLabel:"Sort by",ExposedControlSortPlaceholder:"Select a value",ExposedControlItemsPerPageModel:"items_per_page",ExposedControlItemsPerPageLabel:"Items per page",ExposedControlItemsPerPagePlaceholder:"Select a value",ExposedControlPaginationModel:"page",ExposedFilterKeywordModel:"q",ExposedFilterKeywordType:"phrase_prefix",ExposedFilterKeywordDefaultFields:["title","body","summary_processed","field_landing_page_summary","field_paragraph_summary","field_page_intro_text","field_paragraph_body"],ExposedFilterAggregationOrder:"asc",ExposedFilterAggregationSize:30,DisplayResultComponentType:"card",DisplayResultComponentCardStyle:"noImage",DisplayResultComponentColumns:f,DisplayPaginationComponentColumns:f,ItemsToLoad:12,scrollToResults:!0,scrollToResultsOffsetHeight:102,pageChangeFocusSelector:"a"},!this.searchClient)throw Error("Content Collection Error: A search client function is required.");if(!this.envConfig){console.warn("Content Collection Error: Environmental variables are required. Falling back to default.");var a=this.getDefault("EnvironmentSiteId");this.envConfig={siteId:a,domains:u({},a,"")}}}return d(e,[{key:"getLocalDomainURL",value:function(e,t,i,n){var a="",o="";if(e&&e.length>0){var r,s={},u=l(e);try{for(u.s();!(r=u.n()).done;){var c=r.value,d=c.substring(c.indexOf("-")+1,c.indexOf("/",2)),p=c.substring(c.indexOf("/",2));s[d]=p}}catch(f){u.e(f)}finally{u.f()}t in s?(a=n[t],o=s[t]):i&&(a=n[i],o="//"+a+s[i])}return{domain:a,path:o}}},{key:"getLocalisedLink",value:function(e,t){var i=null;if((null===e||void 0===e?void 0:e.length)>0){var n=this.envConfig;i=n.siteId&&n.domains?this.getLocalDomainURL(e,n.siteId,t,n.domains):{domain:"",path:e[0]}}return i}},{key:"getLocalisedLinkFromSource",value:function(e,t,i){var n=t||this.getDefault("ResultItemFieldNameUrl"),a=i||this.getDefault("ResultItemFieldNamePrimarySite"),o=this.getLocalisedLink(e[n],e[a]);return o}},{key:"cloneObject",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"stripEmptyValues",value:function(e){var t=this;Object.keys(e).forEach((function(i){null===e[i]||""===e[i]?delete e[i]:Array.isArray(e[i])?0===e[i].length&&delete e[i]:"object"===s(e[i])&&t.stripEmptyValues(e[i])}))}},{key:"getNewValue",value:function(e){return Array.isArray(e)?r(e):e}},{key:"syncObject",value:function(e,t,i){var n=this;Object.keys(e).forEach((function(a){var o=!i||i.indexOf(a)>=0;o&&(t[a]=n.getNewValue(e[a]))}))}},{key:"getDiffObject",value:function(e,t){var i={};return Object.keys(e).forEach((function(n){e[n]!==t[n]&&(i[n]=e[n])})),this.stripEmptyValues(i),i}},{key:"getTypeCorrectedQuery",value:function(e,t){var i={};return Object.keys(e).forEach((function(n){Array.isArray(t[n])&&!Array.isArray(e[n])?i[n]=[e[n]]:i[n]=e[n]})),i}},{key:"getIdName",value:function(e){return e.toString()}},{key:"getDefault",value:function(e){return this.defaults[e]}},{key:"getStateValue",value:function(e,t){return null===e||void 0===e?void 0:e[this.getDefault(t)]}},{key:"getTitle",value:function(){return this.config.title}},{key:"getDescription",value:function(){return this.config.description}},{key:"getCTA",value:function(){return this.config.callToAction}},{key:"getDisplayType",value:function(){var e,t,i;return null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(i=t.display)||void 0===i?void 0:i.type}},{key:"getInternalSort",value:function(){var e,t;return null===(e=this.config)||void 0===e||null===(t=e.internal)||void 0===t?void 0:t.sort}},{key:"getInternalItemsToLoad",value:function(){var e,t;return null===(e=this.config)||void 0===e||null===(t=e.internal)||void 0===t?void 0:t.itemsToLoad}},{key:"getDisplayResultCountText",value:function(){var e,t,i,n;return null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(i=t.display)||void 0===i||null===(n=i.options)||void 0===n?void 0:n.resultsCountText}},{key:"getDisplayLoadingText",value:function(){var e,t,i,n;return null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(i=t.display)||void 0===i||null===(n=i.options)||void 0===n?void 0:n.loadingText}},{key:"getDisplayNoResultsText",value:function(){var e,t,i,n;return null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(i=t.display)||void 0===i||null===(n=i.options)||void 0===n?void 0:n.noResultsText}},{key:"getDisplayErrorText",value:function(){var e,t,i,n;return null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(i=t.display)||void 0===i||null===(n=i.options)||void 0===n?void 0:n.errorText}},{key:"getDisplaySort",value:function(){var e,t,i,n;return null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(i=t.display)||void 0===i||null===(n=i.options)||void 0===n?void 0:n.sort}},{key:"getDisplayItemsToLoad",value:function(){var e,t,i,n;return null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(i=t.display)||void 0===i||null===(n=i.options)||void 0===n?void 0:n.itemsToLoad}},{key:"getDisplayResultComponent",value:function(){var e,t,i;return null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(i=t.display)||void 0===i?void 0:i.resultComponent}},{key:"getDisplayResultComponentType",value:function(){var e,t,i,n;return(null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(i=t.display)||void 0===i||null===(n=i.resultComponent)||void 0===n?void 0:n.type)||this.getDefault("DisplayResultComponentType")}},{key:"getDisplayPagination",value:function(){var e,t,i,n;return null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(i=t.display)||void 0===i||null===(n=i.options)||void 0===n?void 0:n.pagination}},{key:"getKeepState",value:function(){var e,t;return null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t?void 0:t.keepState}},{key:"getSkipToResultLinkLabel",value:function(){var e,t;return(null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t?void 0:t.SkipToResultLinkLabel)||this.getDefault("SkipToResultLinkLabel")}},{key:"getSkipToResultLink",value:function(){var e,t,i,n;return void 0===(null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t?void 0:t.skipToResultLink)?this.getDefault("SkipToResultLink"):null===(i=this.config)||void 0===i||null===(n=i.interface)||void 0===n?void 0:n.skipToResultLink}},{key:"getSkipToResultLinkID",value:function(){var e,t=null===(e=this.envConfig)||void 0===e?void 0:e.skipToResultLinkID;return void 0!==t?t:"content-collection-results"}},{key:"getDisplayResultComponentName",value:function(){var e=null;switch(this.getDisplayResultComponentType()){case"search-result":e="rpl-search-result";break;case"card":e="rpl-card-promo";break}return e}},{key:"getDisplayResultComponentColumns",value:function(){var e,t=null;switch(this.getDisplayResultComponentType()){case"card":var i=this.getDefault("DisplayResultComponentColumns");t=null!==(e=this.envConfig)&&void 0!==e&&e.sidebar?i.narrow:i.wide;break}return t}},{key:"getSortModelName",value:function(){return this.getDefault("ExposedControlSortModel")}},{key:"getItemsPerPageModelName",value:function(){return this.getDefault("ExposedControlItemsPerPageModel")}},{key:"getPaginationModelName",value:function(){return this.getDefault("ExposedControlPaginationModel")}},{key:"getDisplayPaginationComponentColumns",value:function(){var e,t=this.getDefault("DisplayPaginationComponentColumns");return null!==(e=this.envConfig)&&void 0!==e&&e.sidebar?t.narrow:t.wide}},{key:"getDisplayPaginationData",value:function(){var e=null,t=this.getDisplayPagination();if(t)switch(t.type){case"numbers":e={totalSteps:0,initialStep:1,stepsAround:2};break}return e}},{key:"getScrollToResults",value:function(){return this.getDefault("scrollToResults")}},{key:"getScrollToResultsOffsetHeight",value:function(){return this.getDefault("scrollToResultsOffsetHeight")}},{key:"pageChangeFocusSelector",value:function(){return this.getDefault("pageChangeFocusSelector")}},{key:"getDSL",value:function(e){var t,i,n=null;return n=null!==(t=this.config)&&void 0!==t&&null!==(i=t.internal)&&void 0!==i&&i.custom?this.config.internal.custom:this.getSimpleDSL(e),n}},{key:"getSimpleDSL",value:function(e){var t,i=this.envConfig.siteId,n=this.getSimpleDSLContentIds(),a=this.getSimpleDSLContentTypes(),o=this.getSimpleDSLContentFields(),s=this.getSimpleDSLCurrentPageFilter(),l=this.getSimpleDSLDateRange(),c=this.getSimpleDSLSort(e),d=this.getSimpleDSLExposedKeyword(e),p=this.getSimpleDSLExposedAdvancedFilters(e),f={query:{bool:{must:[],filter:[],must_not:[]}},sort:[],aggs:[]};(d&&f.query.bool.must.push(d),s&&f.query.bool.must_not.push(s),p)&&((t=f.query.bool.filter).push.apply(t,r(p.filters)),p.aggs&&(f.aggs=p.aggs));return i&&f.query.bool.filter.push({terms:{field_node_site:[i]}}),n&&f.query.bool.filter.push({terms:n}),a&&f.query.bool.filter.push({terms:a}),o.length>0&&o.forEach((function(e){f.query.bool.filter.push({terms:u({},e.fieldName,e.fieldConfig.values)})})),l.length>0&&l.forEach((function(e){f.query.bool.filter.push(e)})),c.length>0&&(f.sort=c),this.stripEmptyValues(f),f}},{key:"getSimpleDSLCurrentPageFilter",value:function(){var e,t,i,n=null,a=null===(e=this.config)||void 0===e||null===(t=e.internal)||void 0===t?void 0:t.includeCurrentPage,o=null===(i=this.envConfig)||void 0===i?void 0:i.currentPage;return!a&&o&&(n={match:{nid:o}}),n}},{key:"getSimpleDSLExposedKeyword",value:function(e){var t,i,n=null,a=null===(t=this.config)||void 0===t||null===(i=t.interface)||void 0===i?void 0:i.keyword;if("basic"===(null===a||void 0===a?void 0:a.type)){var o=this.getStateValue(e,"ExposedFilterKeywordModel");o&&(n={multi_match:{query:o,type:this.getDefault("ExposedFilterKeywordType"),fields:a.fields||this.getDefault("ExposedFilterKeywordDefaultFields")}})}return n}},{key:"getSimpleDSLExposedAdvancedFilters",value:function(e){var t,i,n,a=this,o=null,r=null===(t=this.config)||void 0===t||null===(i=t.interface)||void 0===i||null===(n=i.filters)||void 0===n?void 0:n.fields;if(r){var s=[],l=null;r.forEach((function(t){var i=t.options.model,n=e[i],o=t["elasticsearch-field"]||i,r=a.getSimpleDSLExposedAdvancedFiltersField(t,o,n);null!==r&&void 0!==r&&r.filter&&s.push(r.filter),null!==r&&void 0!==r&&r.agg&&(l||(l={}),l[i]=r.agg)})),o={filters:s,aggs:l}}return o}},{key:"getSimpleDSLExposedAdvancedFiltersField",value:function(e,t,i){var n=null;switch(e.type){case"basic":var a=null,o=null;if(Array.isArray(i)?i.length>0&&(a={terms:u({},t,i)}):i&&(a={terms:u({},t,[i])}),e["elasticsearch-aggregation"]){var r=e["elasticsearch-aggregation-order"]||this.getDefault("ExposedFilterAggregationOrder"),s=e["elasticsearch-aggregation-size"]||this.getDefault("ExposedFilterAggregationSize");o={terms:{field:t,order:{_key:r},size:s}}}n={filter:a,agg:o};break}return n}},{key:"getSimpleDSLContentIds",value:function(){var e,t=null;return null!==(e=this.config.internal)&&void 0!==e&&e.contentIds&&!this.config.internal.contentIds.some(isNaN)&&(t={nid:this.config.internal.contentIds}),t}},{key:"getSimpleDSLContentTypes",value:function(){var e,t=null;return null!==(e=this.config.internal)&&void 0!==e&&e.contentTypes&&(t={type:this.config.internal.contentTypes}),t}},{key:"getSimpleDSLContentFields",value:function(){var e,t=[];if(null!==(e=this.config.internal)&&void 0!==e&&e.contentFields)for(var i=0,n=Object.entries(this.config.internal.contentFields);i<n.length;i++){var a=o(n[i],2),r=a[0],s=a[1];t.push({fieldName:r,fieldConfig:s})}return t}},{key:"getSimpleDSLSort",value:function(e){var t=[],i=null,n=this.getStateValue(e,"ExposedControlSortModel");return i=n?this.getFieldValueFromId(n,this.getExposedSortValues()):this.getInternalSort(),i&&(t=i.map((function(e){return u({},e.field,e.direction)}))),t}},{key:"getSimpleDSLDateRange",value:function(){var e,t=[];if(null!==(e=this.config.internal)&&void 0!==e&&e.dateFilter){var i=this.config.internal.dateFilter,n=null,a=null,o=null;switch(i.criteria){case"range":n=i.dateRangeStart,a=i.dateRangeEnd||i.dateRangeStart;break;case"today":o=this.getStartEndDates("day"),n=o.start,a=o.end;break;case"this_week":o=this.getStartEndDates("week"),n=o.start,a=o.end;break;case"this_month":o=this.getStartEndDates("month"),n=o.start,a=o.end;break;default:console.log("Criteria not supported");break}n&&a&&(t.push({range:u({},i.startDateField,{gte:n})}),t.push({range:u({},i.endDateField,{lte:a})}))}return t}},{key:"getStartEndDates",value:function(e){return{start:p().startOf(e).format(),end:p().endOf(e).format()}}},{key:"getExposedFilterForm",value:function(){var e=null,t=[],i={},n=this.getExposedFilterGroups();return n.forEach((function(e){e.models&&e.models.forEach((function(t,n){i[t]=e.values[n]})),t.push(e.group)})),t.length>0&&(e={model:i,schema:{groups:t},formState:{}}),e}},{key:"getExposedFilterGroups",value:function(){var e=[this.getExposedFilterKeywordGroup(),this.getExposedFilterAdvancedFilterGroup(),this.getExposedFilterSubmissionGroup()];return e.filter((function(e){return null!==e}))}},{key:"getExposedFilterKeywordGroup",value:function(){var e,t,i=null,n=null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t?void 0:t.keyword;if(n){var a=this.getDefault("ExposedFilterKeywordModel");i={models:[a],values:[""],group:{fields:[{type:"input",inputType:"text",label:(null===n||void 0===n?void 0:n.label)||this.getDefault("ExposedFilterKeywordLabel"),placeholder:(null===n||void 0===n?void 0:n.placeholder)||this.getDefault("ExposedFilterKeywordPlaceholder"),model:a}]}}}return i}},{key:"getExposedFilterAdvancedFilterGroup",value:function(){var e,t,i,n=this,a=null,o=null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(i=t.filters)||void 0===i?void 0:i.fields;if((null===o||void 0===o?void 0:o.length)>0){var r=[],s=[],l=[];o.forEach((function(e){var t=n.getExposedFilterField(e);r.push(t.model),s.push(n.getExposedFilterFieldDefaultValue(e)),t&&l.push(t)})),a={models:r,values:s,group:{styleClasses:["app-content-collection__form-wrap"],fields:l}}}return a}},{key:"getExposedFilterFieldDefaultValue",value:function(e){var t="";return"basic"===e.type&&"rplselect"===e.options.type&&e.options.multiselect&&(t=[]),t}},{key:"getExposedFilterField",value:function(e){var t=null;switch(e.type){case"basic":var i=this.cloneObject(e.options);i.styleClasses=e.additionalClasses,t=i;break}return t}},{key:"getExposedFilterSubmissionGroup",value:function(){var e,t,i,n,a,o,r=null,s=[],l=null===(e=this.config)||void 0===e||null===(t=e.interface)||void 0===t||null===(i=t.filters)||void 0===i?void 0:i.submit;"visible"===(null===l||void 0===l?void 0:l.visibility)&&s.push({type:"rplsubmitloader",buttonText:(null===l||void 0===l?void 0:l.label)||this.getDefault("ExposedFilterSubmitLabel"),loading:!1,autoUpdate:!0,styleClasses:["app-content-collection__form-inline"]});var u=null===(n=this.config)||void 0===n||null===(a=n.interface)||void 0===a||null===(o=a.filters)||void 0===o?void 0:o.clearForm;return"visible"===(null===u||void 0===u?void 0:u.visibility)&&s.push({type:"rplclearform",buttonText:(null===u||void 0===u?void 0:u.label)||this.getDefault("ExposedFilterClearFormLabel"),styleClasses:["app-content-collection__form-inline"]}),s.length>0&&(r={group:{styleClasses:["app-content-collection__form-wrap","app-content-collection__form-wrap-no-gutter"],fields:s}}),r}},{key:"getExposedFilterModelNames",value:function(){var e=[];return this.getExposedFilterGroups().forEach((function(t){t.models&&e.push.apply(e,r(t.models))})),e}},{key:"getExposedControlModelNames",value:function(){return this.getExposedControlFields().map((function(e){return e.model}))}},{key:"getExposedControlFields",value:function(){var e=[this.getExposedSortField(),this.getExposedItemsToLoadField()];return e.filter((function(e){return null!==e}))}},{key:"getExposedControlForm",value:function(){var e=null,t=[],i={},n=this.getExposedControlFields();return n.forEach((function(e){i[e.model]=e.value,t.push(e.field)})),t.length>0&&(e={model:i,schema:{groups:[{styleClasses:["app-content-collection__form-wrap"],fields:t}]},formState:{}}),e}},{key:"getExposedControlValues",value:function(e){var t=this,i=null;return e&&(i=e.values.map((function(e){return{id:t.getIdName(e.name),name:e.name,value:e.value}}))),i}},{key:"getExposedSortValues",value:function(){return this.getExposedControlValues(this.getDisplaySort())}},{key:"getExposedItemsToLoadValues",value:function(){return this.getExposedControlValues(this.getDisplayItemsToLoad())}},{key:"getExposedFieldDefaultValue",value:function(e){var t="";return e.length>0&&(t=e[0].id),t}},{key:"getExposedSortField",value:function(){var e=null,t=this.getExposedSortValues();return t&&(e={model:this.getSortModelName(),value:this.getExposedFieldDefaultValue(t),field:{type:"rplselect",model:this.getSortModelName(),label:this.getDefault("ExposedControlSortLabel"),placeholder:this.getDefault("ExposedControlSortPlaceholder"),values:t.map((function(e){var t=e.id,i=e.name;return{id:t,name:i}})),styleClasses:["app-content-collection__form-inline"]}}),e}},{key:"getExposedItemsToLoadField",value:function(){var e=null,t=this.getExposedItemsToLoadValues();return t&&(e={model:this.getItemsPerPageModelName(),value:this.getExposedFieldDefaultValue(t),field:{type:"rplselect",model:this.getItemsPerPageModelName(),label:this.getDefault("ExposedControlItemsPerPageLabel"),placeholder:this.getDefault("ExposedControlItemsPerPagePlaceholder"),values:t.map((function(e){var t=e.id,i=e.name;return{id:t,name:i}})),styleClasses:["app-content-collection__form-inline"]}}),e}},{key:"submitFormOnModelChange",value:function(e,t,i){var n,a,o,r=!1;switch(i){case"exposedFilterForm":null!==(n=this.config)&&void 0!==n&&null!==(a=n.interface)&&void 0!==a&&null!==(o=a.filters)&&void 0!==o&&o.submitOnChange&&t!==this.getDefault("ExposedFilterKeywordModel")&&(r=!0);break;case"controlForm":r=!0;break}return r}},{key:"getDefaultState",value:function(){var e={};this.getDisplayPagination()&&(e[this.getPaginationModelName()]=1),e[this.getSortModelName()]=this.getInitialSort(),e[this.getItemsPerPageModelName()]=this.getInitialItemsToLoad();var t=this.getExposedFilterGroups();return t.forEach((function(t){t.models&&t.models.forEach((function(i,n){e[i]=t.values[n]}))})),e}},{key:"getResults",value:function(){var e=a(regeneratorRuntime.mark((function e(t){var i,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=null,n=this.getSearchRequest(t),e.next=4,this.searchClient(n);case 4:return a=e.sent,a&&(i={hits:a.hits.hits.map(this.mapResult.bind(this)),total:a.hits.total,aggregations:a.aggregations}),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"mapResult",value:function(e){var t,i,n,a,o,r,s,l,u=null,c=e._source,d=this.getLocalisedLinkFromSource(c);switch(this.getDisplayResultComponentType()){case"search-result":u={title:null===(t=c.title)||void 0===t?void 0:t[0],link:d?{linkText:d.domain+d.path,linkUrl:d.path}:null,date:null===(i=c.created)||void 0===i?void 0:i[0],description:null===(n=c.field_landing_page_summary)||void 0===n?void 0:n[0]};break;case"card":var p=null===(a=this.getDisplayResultComponent())||void 0===a?void 0:a.style;u={title:null===(o=c.title)||void 0===o?void 0:o[0],link:d?{text:d.path,url:d.path}:null,dateStart:null===(r=c.created)||void 0===r?void 0:r[0],summary:null===(s=c.field_landing_page_summary)||void 0===s?void 0:s[0],image:null===(l=c.field_media_image_absolute_path)||void 0===l?void 0:l[0],displayStyle:p||this.getDefault("DisplayResultComponentCardStyle")};break}return u}},{key:"updateFiltersFromAggregation",value:function(e,t,i,n){var a=this;Object.keys(e).forEach((function(o){t.schema.groups.forEach((function(t){t.fields.forEach((function(t){if(t.model===o){var r=a.getAggregatedFilterValues(e[o].buckets,i[o]);t.values=r;var s=0===r.length;n(t,s)}}))}))}))}},{key:"getAggregatedFilterValues",value:function(e,t){var i=[];return e.length>0?i=e.map((function(e){var t=e.key,i=e.doc_count;return{id:t,name:"".concat(t," (").concat(i,")")}})):t&&Array.isArray(t)&&(i=t.map((function(e){return{id:e,name:"".concat(e," (0)")}}))),i}},{key:"getSearchRequest",value:function(e){return n({from:this.getStartingItem(e),size:this.getItemsToLoad(e),_source:[]},this.getDSL(e))}},{key:"getInitialControlValue",value:function(e,t,i){var n=e;if(t){var a=this.getExposedFieldDefaultValue(i);a&&(n=a)}return n}},{key:"getInitialSort",value:function(){var e=this.getInternalSort();return this.getInitialControlValue(e,this.getDisplaySort(),this.getExposedSortValues())}},{key:"getInitialItemsToLoad",value:function(){var e=this.getInternalItemsToLoad()||this.getDefault("ItemsToLoad");return this.getInitialControlValue(e,this.getDisplayItemsToLoad(),this.getExposedItemsToLoadValues())}},{key:"getFieldValueFromId",value:function(e,t){var i=null;if(t)for(var n=0;n<t.length;n++)if(t[n].id===e){i=t[n].value;break}return i}},{key:"getItemsToLoad",value:function(e){var t=this.getInitialItemsToLoad(),i=this.getStateValue(e,"ExposedControlItemsPerPageModel");if(i){var n=this.getFieldValueFromId(i,this.getExposedItemsToLoadValues());n&&(t=n)}return t}},{key:"getStartingItem",value:function(e){var t=0,i=e[this.getPaginationModelName()];return i&&(t=(i-1)*this.getItemsToLoad(e)),t}},{key:"getResultCountRange",value:function(e,t){var i=!1;if(t&&t>0){var n=e[this.getPaginationModelName()]||1,a=this.getItemsToLoad(e),o=n<2?1:a*(n-1)+1,r=a*n,s=r>t?t:r;i="".concat(o,"-").concat(s)}return i}},{key:"getProcessedResultsCount",value:function(e,t){var i=null;if(t>0&&(i=this.getDisplayResultCountText(),i)){var n=this.getResultCountRange(e,t);i=i.replace("{range}",n),i=i.replace("{count}",t)}return i}},{key:"getPaginationTotalSteps",value:function(e,t){return Math.ceil(parseInt(t)/this.getItemsToLoad(e))}}]),e}()},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d"),i("ac1f"),i("841c");var n=i("a026"),a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},o=[],r=i("2877"),s={},l=Object(r["a"])(s,a,o,!1,null,null,null),u=l.exports,c=(i("3328"),i("1872")),d=i("8c4f"),p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"controls"},[i("div",{staticClass:"controls__inner"},[i("div",{staticClass:"controls__left"},[i("label",[i("span",[e._v("Elasticsearch config:")]),i("prism-editor",{staticClass:"code-editor",attrs:{highlight:e.highlighter,"line-numbers":""},model:{value:e.customES,callback:function(t){e.customES=t},expression:"customES"}})],1),i("label",[i("span",[e._v("Environment config:")]),i("prism-editor",{staticClass:"code-editor",attrs:{highlight:e.highlighter,"line-numbers":""},model:{value:e.customEnvironment,callback:function(t){e.customEnvironment=t},expression:"customEnvironment"}})],1)]),i("div",{staticClass:"controls__right"},[i("label",[i("span",[e._v("Schema config:")]),i("prism-editor",{staticClass:"code-editor",attrs:{highlight:e.highlighter,"line-numbers":""},model:{value:e.customSchema,callback:function(t){e.customSchema=t},expression:"customSchema"}})],1)])]),i("button",{on:{click:e.updateSchema}},[e._v("Apply configuration")]),i("button",{staticClass:"controls__show-schema",class:{"controls__show-schema--expanded":e.viewSchema},on:{click:function(t){e.viewSchema=!e.viewSchema}}},[e._v(e._s(e.viewSchema?"hide":"show")+" reference schema")]),e.viewSchema?i("div",[i("label",[i("span",[e._v("Reference:")]),i("prism-editor",{staticClass:"code-editor",attrs:{highlight:e.highlighter,"line-numbers":"",readonly:!0},model:{value:e.validationSchema,callback:function(t){e.validationSchema=t},expression:"validationSchema"}})],1)]):e._e()]),i("div",{staticClass:"display"},[e.schema?i("content-collection",{key:e.count,attrs:{schema:e.schema,environment:e.environment}}):e._e()],1)])},f=[],h=(i("a15b"),i("d81d"),i("b64b"),i("99af"),i("e57a")),g=(i("cabf"),i("8c7a")),m=(i("cb55"),i("f393"),i("6b2c"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-content-collection"},[i("div",{staticClass:"app-content-collection__header"},[i("div",{staticClass:"app-content-collection__header-left"},[e.title?i("h2",{staticClass:"app-content-collection__heading"},[e._v(e._s(e.title))]):e._e(),e.description?i("p",[e._v(e._s(e.description))]):e._e(),i("div",{staticClass:"app-content-collection__skip-link rpl-skip-link "},[e.showSkipToResultLink?i("a",{staticClass:"app-content-collection__skip-link__link rpl-skip-link__link",attrs:{href:e.getSkipToResultLinkAnchor}},[e._v(e._s(e.skipToResultLinkLabel))]):e._e()])]),i("div",{staticClass:"app-content-collection__header-right"},[e.cta?i("rpl-link",{attrs:{href:e.cta.url}},[e._v(e._s(e.cta.text))]):e._e()],1)]),e.exposedFilterFormData?i("rpl-form",{attrs:{formData:e.exposedFilterFormData,submitHandler:e.exposedFilterFormSubmit,fieldChangeHandler:e.exposedFilterFormChange,scrollToMessage:!1,validateOnSubmit:!1,submitFormOnClear:!0}}):e._e(),e.exposedFilterFormData?i("rpl-divider"):e._e(),e.showSkipToResultLink?i("div",{attrs:{id:e.getSkipToResultLinkID}}):e._e(),i("rpl-search-results-layout",{ref:"search-results",attrs:{searchResults:e.results,error:e.error,noResultsMsg:e.noResultsText,loading:e.resultsLoading},scopedSlots:e._u([e.resultCount?{key:"count",fn:function(){return[e._v(e._s(e.resultCount))]},proxy:!0}:null,{key:"sort",fn:function(){return[e.exposedControlFormData?i("rpl-form",{attrs:{formData:e.exposedControlFormData,submitHandler:e.exposedControlsFormSubmit,fieldChangeHandler:e.exposedControlFormChange,scrollToMessage:!1,validateOnSubmit:!1,listenForClearForm:!1}}):e._e()]},proxy:!0},{key:"loading",fn:function(){return[e._v(e._s(e.loadingText))]},proxy:!0},{key:"results",fn:function(t){return[e._t("results",(function(){return e._l(t.searchResults,(function(t,n){return i("rpl-col",{key:n+"-result",attrs:{colsBp:e.resultColumns}},[i(e.resultComponentName,e._b({tag:"component",staticClass:"app-content-collection__search-result"},"component",t,!1))],1)}))}),{searchResults:t.searchResults})]}},{key:"pagination",fn:function(){return[i("rpl-col",{attrs:{cols:"full",colsBp:e.paginationColumns}},[e.showPagination?i("rpl-pagination",e._b({on:{change:e.paginationChange}},"rpl-pagination",e.paginationData,!1)):e._e()],1)]},proxy:!0}],null,!0)}),e.isInteractive?i("div",{staticClass:"rpl-visually-hidden",attrs:{"aria-live":"polite"}},[e._v(e._s(e.announcerText))]):e._e()],1)}),v=[],y=i("1da1"),b=i("53ca"),k=(i("5319"),i("96cf"),i("39a6")),S=i("6e67"),C=i("983e"),x=i("8b92"),_=i("ade3"),j=i("d4ec"),F=i("bee2"),T=i("45eb"),D=i("7e84"),E=i("262e"),R=i("2caf"),L=(i("159b"),i("4e7f")),w=i.n(L),O=i("5a0c"),P=function(e){Object(E["a"])(i,e);var t=Object(R["a"])(i);function i(){return Object(j["a"])(this,i),t.apply(this,arguments)}return Object(F["a"])(i,[{key:"getDisplayResultComponentName",value:function(){var e=null;switch(this.getDisplayResultComponentType()){case"vh-search-result":e="vh-search-result";break;default:e=Object(T["a"])(Object(D["a"])(i.prototype),"getDisplayResultComponentName",this).call(this);break}return e}},{key:"mapResult",value:function(e){var t=null,n=e._source,a=this.getLocalisedLink(n.url).path;switch(this.getDisplayResultComponentType()){case"vh-search-result":t=this.vhSearchResultMapping(e,a);break;default:t=Object(T["a"])(Object(D["a"])(i.prototype),"mapResult",this).call(this,e);break}return t}},{key:"vhSearchResultMapping",value:function(e,t){var i,n,a,o=null===(i=this.config.interface)||void 0===i||null===(n=i.display)||void 0===n||null===(a=n.resultComponent)||void 0===a?void 0:a.options;return{icon:o.icon?this.getVhSearchResultValue(o.icon,e):null,title:o.title?this.getVhSearchResultValue(o.title,e):null,link:{linkText:t,linkUrl:t},subTop:o.subTop?this.getVhSearchResultValue(o.subTop,e):null,summary:o.summary?this.getVhSearchResultValue(o.summary,e):null,subBottom:o.subBottom?this.getVhSearchResultValue(o.subBottom,e):null}}},{key:"getVhSearchResultValue",value:function(e,t){var i,n,a,o,r=this,s=null;switch(e.type){case"icon":s=e.symbol;break;case"text":s=null===(i=t._source)||void 0===i||null===(n=i[e.field])||void 0===n?void 0:n[0];break;case"date":s=O(null===(a=t._source)||void 0===a||null===(o=a[e.field])||void 0===o?void 0:o[0]).format(e.format);break;case"formatted":var l=e.format;e.fields.forEach((function(e){var i=e.field,n=r.getVhSearchResultValue(e,t);l=l.replace("{".concat(i,"}"),n||"")})),s=l;break}return s}},{key:"getExposedFilterField",value:function(e){var t=null;switch(e.type){case"a-z":var n=this.cloneObject(e.options);n.type=n.type||"rploptionbutton",n.label=n.label||"Starting Letter",n.styleClasses=e.additionalClasses||"app-content-collection__form-col-full",t=n;break;default:t=Object(T["a"])(Object(D["a"])(i.prototype),"getExposedFilterField",this).call(this,e);break}return t}},{key:"getSimpleDSLExposedAdvancedFiltersField",value:function(e,t,n){var a=null;switch(e.type){case"a-z":n&&(a={filter:{prefix:Object(_["a"])({},t,n.toLowerCase())}});break;default:a=Object(T["a"])(Object(D["a"])(i.prototype),"getSimpleDSLExposedAdvancedFiltersField",this).call(this,e,t,n);break}return a}}]),i}(w.a),A=i("e0a2"),I=i("f031"),M=i("0d41"),N={name:"AppContentCollection",mixins:[x["a"]],components:{RplLink:k["a"],RplForm:S["a"],RplCol:C["a"],RplDivider:c["b"],RplSearchResultsLayout:I["b"],RplSearchResult:I["a"],RplCardPromo:M["RplCardPromo"],RplPagination:A["a"]},props:{schema:Object,environment:Object,preloadSearchResponse:Object,sidebar:{type:Boolean,default:!1}},data:function(){var e=this.searchEndpoint.bind(this),t=new P(this.schema,e,this.environment);return{dataManager:t,defaultState:t.getDefaultState(),state:t.getDefaultState(),results:[],resultCount:null,resultsLoading:!1,error:null,announcerText:"",scrollOnNextLoad:!1,scrollOnPaginationChange:!1,scrollOffset:t.getScrollToResultsOffsetHeight(),pageChangeFocusSelector:t.pageChangeFocusSelector(),exposedFilterFormData:t.getExposedFilterForm(),exposedControlFormData:t.getExposedControlForm(),exposedControlModels:t.getExposedControlModelNames(),exposedFilterModels:t.getExposedFilterModelNames(),paginationData:t.getDisplayPaginationData(),useRouter:t.getKeepState()}},computed:{title:function(){return this.dataManager.getTitle()},description:function(){return this.dataManager.getDescription()},cta:function(){return this.dataManager.getCTA()},loadingText:function(){return this.dataManager.getDisplayLoadingText()},noResultsText:function(){return this.dataManager.getDisplayNoResultsText()},errorText:function(){return this.dataManager.getDisplayErrorText()},resultComponentName:function(){return this.dataManager.getDisplayResultComponentName()},resultColumns:function(){return this.dataManager.getDisplayResultComponentColumns()},paginationColumns:function(){return this.dataManager.getDisplayPaginationComponentColumns()},showPagination:function(){return this.paginationData&&this.paginationData.totalSteps>1},paginationModelName:function(){return this.dataManager.getPaginationModelName()},isInteractive:function(){return!!this.exposedFilterFormData||!!this.exposedControlFormData||!!this.paginationData},showSkipToResultLink:function(){return!!this.exposedFilterFormData&&this.dataManager.getSkipToResultLink()},skipToResultLinkLabel:function(){return this.dataManager.getSkipToResultLinkLabel()},getSkipToResultLinkID:function(){return this.dataManager.getSkipToResultLinkID()},getSkipToResultLinkAnchor:function(){return"#"+this.dataManager.getSkipToResultLinkID()}},methods:{searchEndpoint:function(e){return this.$tideSearchApi.searchByPost(e)},resultTotal:function(e){var t=0;return e&&(t="object"===Object(b["a"])(e)?e.value:e),t},getResults:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.resultsLoading=!0,e.announcerText="",t.next=4,e.dataManager.getResults(e.state);case 4:i=t.sent,i?(e.error=null,e.updateInterfaceFromSearchResponse(i),e.announcerText=e.resultTotal(i.total)>0?e.resultCount:e.noResultsText):(e.error={message:e.errorText},e.announcerText=e.errorText),e.resultsLoading=!1,e.scrollOnNextLoad&&(e.scrollOnNextLoad=!1,e.moveToTopOfResults());case 8:case"end":return t.stop()}}),t)})))()},moveToTopOfResults:function(){var e=this;if(this.scrollOnPaginationChange){var t,i=null===(t=this.$refs["search-results"])||void 0===t?void 0:t.$el;i&&this.$nextTick((function(){if(window.scrollTo({top:i.offsetTop-e.scrollOffset}),e.pageChangeFocusSelector){var t=i.querySelector(e.pageChangeFocusSelector);t&&t.focus()}}))}},updateInterfaceFromSearchResponse:function(e){this.results=e.hits;var t=this.resultTotal(e.total);this.resultCount=this.dataManager.getProcessedResultsCount(this.state,t),this.exposedFilterFormData&&e.aggregations&&this.dataManager.updateFiltersFromAggregation(e.aggregations,this.exposedFilterFormData,this.state,(function(e,t){n["default"].set(e,"disabled",t)})),this.paginationData&&(this.paginationData.totalSteps=this.dataManager.getPaginationTotalSteps(this.state,t))},syncTo:function(e,t,i){return this.dataManager.syncObject(e,t,i)},resetPagination:function(){this.state[this.paginationModelName]=1},setPaginationFromState:function(){this.paginationData&&(this.paginationData.initialStep=parseInt(this.state[this.paginationModelName]))},paginationChange:function(e){this.scrollOnNextLoad=!0,this.syncTo({page:e},this.state),this.updateQuery()},exposedFilterFormSubmit:function(){this.syncTo(this.exposedFilterFormData.model,this.state),this.resetPagination(),this.updateQuery()},exposedControlsFormSubmit:function(){this.syncTo(this.exposedControlFormData.model,this.state),this.resetPagination(),this.updateQuery()},exposedFilterFormChange:function(e,t){this.dataManager.submitFormOnModelChange(e,t,"exposedFilterForm")&&this.exposedFilterFormSubmit()},exposedControlFormChange:function(e,t){this.dataManager.submitFormOnModelChange(e,t,"controlForm")&&this.exposedControlsFormSubmit()},updateQuery:function(){var e=this.dataManager.getDiffObject(this.state,this.defaultState);this.useRouter?this.$router.replace({query:e}):(this.syncQueryState(e),this.getResults())},syncQueryState:function(e){this.syncTo(this.dataManager.getTypeCorrectedQuery(e,this.defaultState),this.state),this.exposedFilterFormData&&this.syncTo(this.state,this.exposedFilterFormData.model,this.exposedFilterModels),this.exposedControlFormData&&this.syncTo(this.state,this.exposedControlFormData.model,this.exposedControlModels),this.setPaginationFromState()},initializeScrollOnPageChange:function(){this.scrollOnPaginationChange=this.dataManager.getScrollToResults()}},watch:{$route:function(e,t){this.syncQueryState(e.query),this.getResults()}},created:function(){this.useRouter&&this.syncQueryState(this.$route.query),this.preloadSearchResponse&&(this.updateInterfaceFromSearchResponse(this.preloadSearchResponse),this.initializeScrollOnPageChange())},mounted:function(){this.preloadSearchResponse||this.getResults().then(this.initializeScrollOnPageChange.bind(this))}},V=N,q=(i("0aff"),Object(r["a"])(V,m,v,!1,null,null,null)),z=q.exports,H=i("79e7"),U=i("9940"),$=i("2ec7"),K=i("93ad"),B=i("ebd9"),J=new B({allErrors:!0}),Q={name:"App",components:{PrismEditor:h["a"],ContentCollection:z},data:function(){return{customES:JSON.stringify($,null,2),customEnvironment:JSON.stringify(U,null,2),customSchema:JSON.stringify(H,null,2),validationSchema:JSON.stringify(K,null,2),environment:null,schema:null,count:0,viewSchema:!1}},methods:{updateSchema:function(){var e=JSON.parse(this.customES);e&&this.$tideSearchApi.setParams(e);var t=JSON.parse(this.customEnvironment);t&&(this.environment=t);try{var i=JSON.parse(this.customSchema),n=J.compile(K),a=n(i);a?(this.schema=i,this.count++):this.printError(n.errors)}catch(o){alert(o)}},highlighter:function(e){return Object(g["highlight"])(e,g["languages"].json)},printError:function(e){console.log(e);var t=e.map((function(e){var t=e.instancePath||"root",i=e.schemaPath,n=e.message,a=Object.keys(e.params).map((function(t){return"".concat(t,": ").concat(e.params[t])}));return"".concat(t," -> ").concat(i,":\n\t").concat(n,"\n\t\t").concat(a)})).join("\n");alert(t)}},mounted:function(){this.updateSchema()}},G=Q,Y=(i("21bb"),Object(r["a"])(G,p,f,!1,null,null,null)),Z=Y.exports,W=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("content-collection",{attrs:{schema:e.schema,environment:e.environment}})],1)},X=[],ee={name:"App",components:{ContentCollection:z},data:function(){return{environment:{siteId:"4",primarySiteId:"4",domains:{4:""}},schema:{title:"Health Alerts",description:"Aliqua commodo mollit enim nulla minim sit ut ullamco ea dolore non consectetur eu laborum. ",callToAction:{text:"View all",url:"/search"},internal:{itemsToLoad:20,contentTypes:["health_alert"],sort:[{field:"created",direction:"desc"}]},interface:{keyword:{type:"basic",label:"Search by keyword",placeholder:"Enter keyword(s)"},filters:{submit:{visibility:"visible",label:"Apply change"},clearForm:{visibility:"visible",label:"Clear search"},fields:[{type:"basic",options:{model:"field_health_status",type:"rplselect",label:"Health alert status",placeholder:"Select an alert status",values:[{id:"active",name:"Active"},{id:"resolved",name:"Resolved"}]},additionalClasses:["app-content-collection__form-col-3"],"elasticsearch-field":"type","elasticsearch-aggregation":!1},{type:"basic",options:{model:"field_health_type",type:"rplselect",label:"Health alert type",placeholder:"Select an alert type",values:[{id:"health-alerts",name:"Alert"},{id:"health-advisories",name:"Advisory"}]},additionalClasses:["app-content-collection__form-col-3"],"elasticsearch-field":"field_health_type","elasticsearch-aggregation":!1}]},display:{type:"grid",options:{resultsCountText:"Displaying {range} of {count} results",loadingText:"Loading",noResultsText:"Sorry! We couldn't find any matches",errorText:"Search isn't working right now, please try again later.",sort:{type:"field",values:[{name:"Relevance",value:null},{name:"Title A-Z",value:[{field:"title.keyword",direction:"asc"}]},{name:"Title Z-A",value:[{field:"title.keyword",direction:"desc"}]},{name:"Newest",value:[{field:"created",direction:"desc"}]},{name:"Oldest",value:[{field:"created",direction:"asc"}]}]},itemsToLoad:{type:"field",values:[{name:"1",value:1},{name:"2",value:2},{name:"5",value:5},{name:"10",value:10},{name:"20",value:20},{name:"50",value:50},{name:"All",value:9999}]},pagination:{type:"numbers"}},resultComponent:{type:"vh-search-result",options:{title:{type:"text",field:"title"},summary:{type:"formatted",fields:[{type:"date",field:"changed",format:"DD MMM YYYY"},{type:"text",field:"field_health_type"},{type:"date",field:"created",format:"DD MMMM YYYY"}],format:"{changed} - Update to <code>{field_health_type}</code> issued {created}"},subBottom:{type:"formatted",fields:[{type:"text",field:"field_health_status"},{type:"text",field:"field_health_type"},{type:"text",field:"field_health_alert_number"}],format:"{field_health_status} | {field_health_type} {field_health_alert_number}"}}}}}}}}},te=ee,ie=Object(r["a"])(te,W,X,!1,null,null,null),ne=ie.exports;n["default"].use(d["a"]);var ae=[{path:"/",name:"Home",component:Z},{path:"/health-alerts",name:"Health alerts",component:ne}],oe=new d["a"]({routes:ae}),re=oe,se=i("6760"),le=i.n(se),ue=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vh-search-result"},[i("div",{staticClass:"vh-search-result__title-bar"},[e.icon?i("rpl-icon",{staticClass:"vh-search-result__title-icon",attrs:{symbol:e.icon,color:"primary"}}):e._e(),e.title?i("rpl-link",{staticClass:"vh-search-result__link",attrs:{href:e.link.linkUrl}},[i("h2",{staticClass:"vh-search-result__heading"},[e._v(e._s(e.title))])]):e._e()],1),e.subTop?i("div",{staticClass:"vh-search-result__sub-top"},[e._v(e._s(e.subTop))]):e._e(),e.summary?i("div",{staticClass:"vh-search-result__summary",domProps:{innerHTML:e._s(e.summary)}}):e._e(),e.subBottom?i("div",{staticClass:"vh-search-result__sub-bottom"},[e._v(e._s(e.subBottom))]):e._e()])},ce=[],de=i("2470"),pe={name:"VhSearchResult",props:{icon:String,title:String,link:Object,subTop:String,summary:String,subBottom:String},components:{RplLink:k["e"],RplIcon:de["a"]}},fe=pe,he=(i("6590"),Object(r["a"])(fe,ue,ce,!1,null,null,null)),ge=he.exports;n["default"].config.productionTip=!1,n["default"].use(c["c"],{}),n["default"].component("vh-search-result",ge);var me={searchByPost:function(e){return le.a.search(e)},setParams:function(e){le.a.setESParams(e)}};n["default"].mixin({beforeCreate:function(){var e=this.$options;e.tideSearchApi?this.$tideSearchApi=e.tideSearchApi:e.parent&&e.parent.$tideSearchApi&&(this.$tideSearchApi=e.parent.$tideSearchApi)}}),new n["default"]({router:re,tideSearchApi:me,render:function(e){return e(u)}}).$mount("#app")},6590:function(e,t,i){"use strict";i("3318")},6760:function(e,t,i){var n=i("c973").default;i("96cf"),i("99af"),i("4e82"),i("ac1f"),i("841c");var a=i("f94d"),o="",r="",s="",l="",u="";e.exports={setESParams:function(e){o=e.SEARCH_URL,r=e.SEARCH_AUTH_USERNAME,s=e.SEARCH_AUTH_PASSWORD,l=e.SEARCH_INDEX,u=e.SEARCH_HASH},search:function(e){return n(regeneratorRuntime.mark((function t(){var i,n,c,d,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i="https://"+u+"."+o,n={host:i,apiVersion:"7.6",httpAuth:"".concat(r,":").concat(s)},c=new a.Client(n),t.prev=3,d={},d.index=void 0===e.index?l:e.index,d.from=e.from,d.size=e.size,d._source=e._source,d.body={query:e.query,sort:e.sort,aggs:e.aggs},t.next=12,c.search(d);case 12:return p=t.sent,t.abrupt("return",p);case 16:return t.prev=16,t.t0=t["catch"](3),console.trace(t.t0.message),t.abrupt("return",null);case 20:case"end":return t.stop()}}),t,null,[[3,16]])})))()}}},"79e7":function(e){e.exports=JSON.parse('{"title":"Content Collection","interface":{"keepState":true,"skipToResultLink":true,"SkipToResultLinkLabel":"Skip to results","keyword":{"type":"basic","label":"Search by keyword","placeholder":"Enter keyword(s)"},"filters":{"submitOnChange":false,"submit":{"visibility":"visible","label":"Apply change"},"clearForm":{"visibility":"visible","label":"Clear search"},"fields":[{"type":"basic","options":{"model":"type","type":"rplselect","label":"Type","hint":"The content type to filter by","placeholder":"Select type","values":[{"id":"landing_page","name":"Landing Page"},{"id":"news","name":"News"}]},"additionalClasses":["app-content-collection__form-col-3"],"elasticsearch-field":"type","elasticsearch-aggregation":false},{"type":"basic","options":{"model":"field_tags_name","type":"rplselect","multiselect":true,"label":"Tags","placeholder":"Select some tags","values":[]},"additionalClasses":["app-content-collection__form-col-3"],"elasticsearch-field":"field_tags_name","elasticsearch-aggregation":true},{"type":"basic","options":{"model":"field_topic_name","type":"rplselect","multiselect":true,"label":"Topic","placeholder":"Select a topic","values":[]},"additionalClasses":["app-content-collection__form-col-3"],"elasticsearch-field":"field_topic_name","elasticsearch-aggregation":true}]},"display":{"type":"grid","options":{"resultsCountText":"Displaying {range} of {count} results","loadingText":"Loading","noResultsText":"Sorry! We couldn\'t find any matches","errorText":"Search isn\'t working right now, please try again later.","sort":{"type":"field","values":[{"name":"Relevance","value":null},{"name":"Title A-Z","value":[{"field":"title.keyword","direction":"asc"}]},{"name":"Title Z-A","value":[{"field":"title.keyword","direction":"desc"}]},{"name":"Newest","value":[{"field":"created","direction":"desc"}]},{"name":"Oldest","value":[{"field":"created","direction":"asc"}]}]},"itemsToLoad":{"type":"field","values":[{"name":"12","value":12},{"name":"24","value":24}]},"pagination":{"type":"numbers"}},"resultComponent":{"type":"card"}}}}')},"858a":function(e,t,i){},"93ad":function(e){e.exports=JSON.parse('{"type":"object","description":"Schema for the Content Collection","properties":{"title":{"type":"string","description":"Title displayed above results"},"description":{"type":"string","description":"Description displayed above the results"},"callToAction":{"type":"object","description":"A link to another page.","properties":{"text":{"type":"string","description":"Display text of the link"},"url":{"type":"string","description":"A relative or absolute URL."}},"additionalProperties":false},"connection":{"type":"object","description":"Configuration of the search endpoint.","properties":{"type":{"type":"string","description":"The type of search endpoint to query. Defaults to elastic-search."},"index":{"type":"string","description":"Used by Tide to store the machine name of the index to query."},"serverIndex":{"type":"string","description":"Used by Nuxt-tide Search API to query a particular index."}},"additionalProperties":false},"internal":{"type":"object","description":"Contains the rules for generating the search query.","oneOf":[{"properties":{"contentIds":{"type":"array","description":"Array of node ids for content","items":{"type":"number"}},"contentTypes":{"type":"array","description":"Array of content types","items":{"type":"string"}},"contentFields":{"type":"object","description":"Fields to filter the content against.","patternProperties":{"^[a-z0-9]+$":{"type":"object","properties":{"operator":{"type":"string","enum":["AND","OR"]},"values":{"type":"array","items":{"type":"number"}}},"additionalProperties":false}}},"includeCurrentPage":{"type":"boolean","description":"For excluding the page that this component is being rendered upon."},"excludeIds":{"type":"array","description":"Array of node ids for excluding from content","items":{"type":"number"}},"dateFilter":{"type":"object","properties":{"criteria":{"type":"string","description":"","enum":["today","this_week","this_month","this_year","today_and_future","past","range"]},"startDateField":{"type":"string","description":""},"endDateField":{"type":"string","description":""},"dateRangeStart":{"type":"string","description":"Start and end dates to test against. Formatted as ISO 8601","pattern":"\\\\d{4}-[01]\\\\d-[0-3]\\\\dT[0-2]\\\\d:[0-5]\\\\d:[0-5]\\\\d([+-][0-2]\\\\d:[0-5]\\\\d|Z)"},"dateRangeEnd":{"type":"string","description":"Start and end dates to test against. Formatted as ISO 8601","pattern":"\\\\d{4}-[01]\\\\d-[0-3]\\\\dT[0-2]\\\\d:[0-5]\\\\d:[0-5]\\\\d([+-][0-2]\\\\d:[0-5]\\\\d|Z)"}},"additionalProperties":false},"sort":{"type":"array","items":{"type":"object","properties":{"field":{"type":"string"},"direction":{"type":"string","enum":["desc","asc"]}}}},"itemsToLoad":{"type":"number","minimum":1}},"additionalProperties":false},{"properties":{"custom":{"type":"object","description":"Pure Elasticsearch DSL Query"}},"additionalProperties":false}]},"interface":{"type":"object","description":"User options for filtering by keywords.","properties":{"keepState":{"type":"boolean","description":"Store the state of the user interactions in the URL. Only one Content Collection can use this per page."},"skipToResultLink":{"type":"boolean","description":"Show skip to result link when accessing using a tab key, default is true."},"SkipToResultLinkLabel":{"type":"string","description":"Default is `Skip to results`"},"keyword":{"type":"object","properties":{"type":{"type":"string"},"label":{"type":"string"},"placeholder":{"type":"string"},"fields":{"type":"array","items":{"type":"string"}}}},"filters":{"type":"object","properties":{"expandSearchFilters":{"type":"boolean"},"submitOnChange":{"type":"boolean"},"label":{"type":"string"},"submit":{"type":"object","properties":{"visibility":{"type":"string","enum":["visible","hidden","when-needed"]},"label":{"type":"string"}}},"clearForm":{"type":"object","properties":{"visibility":{"type":"string","enum":["visible","hidden","when-needed"]},"label":{"type":"string"}}},"defaultStyling":{"type":"boolean"},"fields":{"type":"array","items":{"type":"object","properties":{"type":{"type":"string"},"options":{"type":"object","properties":{"model":{"type":"string","description":"The URL query key for this field, and a fallback if elasticsearch-field is undefined."}},"required":["model"]},"additionalClasses":{"type":"array","items":{"type":"string"}},"elasticsearch-field":{"type":"string"},"elasticsearch-aggregation":{"type":"boolean","description":"Determine if field should be added to aggregation."},"elasticsearch-aggregation-order":{"type":"string","description":"The order (asc / desc) for aggregation results."},"elasticsearch-aggregation-size":{"type":"number","description":"The number of aggregated results to return."}},"additionalProperties":false,"required":["type","options"]}}},"additionalProperties":false},"display":{"type":"object","properties":{"type":{"type":"string"},"options":{"type":"object","properties":{"resultsCountText":{"type":"string"},"loadingText":{"type":"string"},"noResultsText":{"type":"string"},"errorText":{"type":"string"},"sort":{"type":"object","properties":{"type":{"type":"string"},"values":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"value":{"type":["array","null"],"description":"The sort value or values to apply."}}}}},"required":["type"]},"itemsToLoad":{"type":"object","properties":{"type":{"type":"string"},"values":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"value":{"type":["number","null"]}}}}},"required":["type"]},"pagination":{"type":"object","properties":{"type":{"type":"string"}},"required":["type"]}}},"resultComponent":{"type":"object","properties":{"type":{"type":"string"}},"required":["type"]}},"required":["type"]}},"additionalProperties":false}},"additionalProperties":false}')},9940:function(e){e.exports=JSON.parse('{"siteId":"4","domains":{"4":"www.vic.gov.au"},"currentPage":"","sidebar":false,"skipToResultLinkID":"go-here-please"}')}});